# Ğ£Ñ€Ğ¾Ğº 4: Ğ£ÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ, Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¸ Ğ¼Ğ°ÑÑˆÑ‚Ğ°Ğ±Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

## Ğ’Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ

Ğ’ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… ÑƒÑ€Ğ¾ĞºĞ°Ñ… Ğ¼Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°Ğ»Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‰ĞµĞ³Ğ¾ ReAct-Ğ°Ğ³ĞµĞ½Ñ‚Ğ°. ĞĞ¾ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿Ğ¾Ğ¼ Ğ¸ production-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¾Ğ¹ â€” Ğ±Ğ¾Ğ»ÑŒÑˆĞ°Ñ Ñ€Ğ°Ğ·Ğ½Ğ¸Ñ†Ğ°.

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿Ğ°:**
- ĞĞ³ĞµĞ½Ñ‚ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ñ‚ÑŒÑÑ
- ĞœĞ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ½ĞµÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
- Ğ¢ĞµÑ€ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸
- ĞĞµÑ‚ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°
- Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ¾Ñ‚Ğ»Ğ°Ğ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ² production

Ğ’ ÑÑ‚Ğ¾Ğ¼ ÑƒÑ€Ğ¾ĞºĞµ Ğ¼Ñ‹ Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‚Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾Ñ‚Ğ¾Ñ‚Ğ¸Ğ¿ Ğ² Ğ½Ğ°Ğ´Ñ‘Ğ¶Ğ½ÑƒÑ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ.

## Ğ¦ĞµĞ»Ğ¸ ÑƒÑ€Ğ¾ĞºĞ°

ĞŸĞ¾ÑĞ»Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ ÑƒÑ€Ğ¾ĞºĞ° Ğ²Ñ‹ ÑĞ¼Ğ¾Ğ¶ĞµÑ‚Ğµ:

- âœ… Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñƒ Ğ¾Ñ‚ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½ÑƒÑ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ°Ğ³ĞµĞ½Ñ‚Ñƒ
- âœ… ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
- âœ… ĞŸĞ¾Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ Ğ¾ÑĞ½Ğ¾Ğ²Ñ‹ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ñ‹Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼

## ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ñ‚ĞµÑ€Ğ¼Ğ¸Ğ½Ñ‹

- **Guardrails** â€” Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
- **Rate Limiting** â€” Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ñ‹ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
- **Short-term Memory** â€” Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ² Ñ€Ğ°Ğ¼ĞºĞ°Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
- **Long-term Memory** â€” Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸
- **Observability** â€” Ğ½Ğ°Ğ±Ğ»ÑĞ´Ğ°ĞµĞ¼Ğ¾ÑÑ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

## 1. ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² production

### Ğ¢Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ĞŸĞ ĞĞ‘Ğ›Ğ•ĞœĞ« ĞĞ“Ğ•ĞĞ¢ĞĞ’                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  1. Ğ—ĞĞ¦Ğ˜ĞšĞ›Ğ˜Ğ’ĞĞĞ˜Ğ•                                              â”‚
â”‚     THOUGHT: ĞÑƒĞ¶Ğ½Ğ¾ ÑƒĞ·Ğ½Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñƒ                              â”‚
â”‚     ACTION: search("Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°")                                  â”‚
â”‚     OBSERVATION: Ğ¢ĞµĞ¼Ğ¿ĞµÑ€Ğ°Ñ‚ÑƒÑ€Ğ° 20Â°C                             â”‚
â”‚     THOUGHT: ĞÑƒĞ¶Ğ½Ğ¾ ÑƒĞ·Ğ½Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ñƒ  â† ĞŸĞĞ’Ğ¢ĞĞ !                  â”‚
â”‚     ACTION: search("Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°")                                  â”‚
â”‚     ...Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾...                                         â”‚
â”‚                                                                â”‚
â”‚  2. Ğ“ĞĞ›Ğ›Ğ®Ğ¦Ğ˜ĞĞĞ¦Ğ˜Ğ¯ Ğ˜ĞĞ¡Ğ¢Ğ Ğ£ĞœĞ•ĞĞ¢ĞĞ’                                 â”‚
â”‚     ACTION: super_search("query")  â† ĞĞ• Ğ¡Ğ£Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ£Ğ•Ğ¢!          â”‚
â”‚                                                                â”‚
â”‚  3. ĞĞ•Ğ’Ğ•Ğ ĞĞ«Ğ• ĞĞ Ğ“Ğ£ĞœĞ•ĞĞ¢Ğ«                                        â”‚
â”‚     ACTION: calculator()  â† Ğ—ĞĞ‘Ğ«Ğ› ĞĞ Ğ“Ğ£ĞœĞ•ĞĞ¢!                  â”‚
â”‚     ACTION: calculator("Ğ¿Ñ€Ğ¸Ğ²ĞµÑ‚")  â† ĞĞ•Ğ’Ğ•Ğ ĞĞ«Ğ™ Ğ¢Ğ˜ĞŸ!            â”‚
â”‚                                                                â”‚
â”‚  4. ĞŸĞĞ¢Ğ•Ğ Ğ¯ ĞšĞĞĞ¢Ğ•ĞšĞ¡Ğ¢Ğ                                          â”‚
â”‚     Ğ¡ĞµÑÑĞ¸Ñ 1: "ĞœĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞĞ»ĞµĞºÑ"                             â”‚
â”‚     Ğ¡ĞµÑÑĞ¸Ñ 2: "ĞšĞ°Ğº Ğ¼ĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚?" â†’ "ĞĞµ Ğ·Ğ½Ğ°Ñ"  â† Ğ—ĞĞ‘Ğ«Ğ›!        â”‚
â”‚                                                                â”‚
â”‚  5. ĞŸĞ Ğ•Ğ’Ğ«Ğ¨Ğ•ĞĞ˜Ğ• Ğ›Ğ˜ĞœĞ˜Ğ¢ĞĞ’                                        â”‚
â”‚     - Ğ¢Ğ¾ĞºĞµĞ½Ñ‹: ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ğ´Ğ»Ğ¸Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚                       â”‚
â”‚     - Ğ˜Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸: Ğ±ĞµÑĞºĞ¾Ğ½ĞµÑ‡Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ»                             â”‚
â”‚     - API: rate limiting                                      â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ ĞµĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ

```python
# Ğ›Ğ¾Ğ³ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°ÑÑ‰ĞµĞ³Ğ¾ÑÑ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°

"""
--- Ğ˜Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ñ 1 ---
THOUGHT: ĞÑƒĞ¶Ğ½Ğ¾ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ñƒ Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸
ACTION: wikipedia("ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ğ° Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸")
OBSERVATION: ĞŸĞ°Ñ€Ğ¸Ğ¶ â€” ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ğ° Ğ¸ ĞºÑ€ÑƒĞ¿Ğ½ĞµĞ¹ÑˆĞ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´ Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸...

--- Ğ˜Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ñ 2 ---
THOUGHT: ĞÑƒĞ¶Ğ½Ğ¾ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ğµ Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸
ACTION: wikipedia("ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ğ° Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸")
OBSERVATION: ĞŸĞ°Ñ€Ğ¸Ğ¶ â€” ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ğ° Ğ¸ ĞºÑ€ÑƒĞ¿Ğ½ĞµĞ¹ÑˆĞ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´ Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸...

--- Ğ˜Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ñ 3 ---
THOUGHT: ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑƒĞ·Ğ½Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ñƒ Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸
ACTION: wikipedia("ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ğ° Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸")
OBSERVATION: ĞŸĞ°Ñ€Ğ¸Ğ¶ â€” ÑÑ‚Ğ¾Ğ»Ğ¸Ñ†Ğ° Ğ¸ ĞºÑ€ÑƒĞ¿Ğ½ĞµĞ¹ÑˆĞ¸Ğ¹ Ğ³Ğ¾Ñ€Ğ¾Ğ´ Ğ¤Ñ€Ğ°Ğ½Ñ†Ğ¸Ğ¸...

... Ğ¸ Ñ‚Ğ°Ğº Ğ´Ğ¾ max_iterations ...
"""

# ĞĞ³ĞµĞ½Ñ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ² Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸, Ğ½Ğ¾ Ğ½Ğµ Ğ¿Ğ¾Ğ½ÑĞ», Ñ‡Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒÑÑ!
```

## 2. Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹

### ĞšĞ»Ğ°ÑÑ RobustReActAgent

```python
"""
Ğ£ÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ñ‹Ğ¹ ReAct-Ğ°Ğ³ĞµĞ½Ñ‚ Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ°Ğ¼Ğ¸.
"""

import os
import re
import json
import time
from typing import Dict, List, Optional, Set
from collections import Counter
from datetime import datetime


class RobustReActAgent:
    """
    ReAct-Ğ°Ğ³ĞµĞ½Ñ‚ Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¾Ğ¹ Ğ¾Ñ‚ Ñ‚Ğ¸Ğ¿Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼:
    - Ğ—Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ
    - ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
    - ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ²
    """
    
    def __init__(
        self,
        toolkit: 'ToolKit',
        model: str = "openai/gpt-4-turbo-preview",
        max_iterations: int = 10,
        max_same_action: int = 2,      # ĞœĞ°ĞºÑ. Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
        max_consecutive_errors: int = 3,  # ĞœĞ°ĞºÑ. Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¿Ğ¾Ğ´Ñ€ÑĞ´
        cooldown_seconds: float = 0.5,    # ĞŸĞ°ÑƒĞ·Ğ° Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸
        verbose: bool = True
    ):
        self.toolkit = toolkit
        self.model = model
        self.max_iterations = max_iterations
        self.max_same_action = max_same_action
        self.max_consecutive_errors = max_consecutive_errors
        self.cooldown_seconds = cooldown_seconds
        self.verbose = verbose
        
        # Ğ¢Ñ€ĞµĞºĞ¸Ğ½Ğ³ Ğ´Ğ»Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹
        self.action_history: List[str] = []
        self.consecutive_errors: int = 0
    
    def _check_loop(self, action: str) -> bool:
        """
        ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, Ğ½Ğµ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ»ÑÑ Ğ»Ğ¸ Ğ°Ğ³ĞµĞ½Ñ‚.
        
        Returns:
            True ĞµÑĞ»Ğ¸ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¾ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ
        """
        # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ
        self.action_history.append(action)
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ N Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
        recent_actions = self.action_history[-5:]
        action_counts = Counter(recent_actions)
        
        # Ğ•ÑĞ»Ğ¸ Ğ¾Ğ´Ğ½Ğ¾ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑĞµÑ‚ÑÑ ÑĞ»Ğ¸ÑˆĞºĞ¾Ğ¼ Ñ‡Ğ°ÑÑ‚Ğ¾
        if action_counts[action] >= self.max_same_action:
            self._log(f"âš ï¸ ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¾ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ: '{action}' Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑĞµÑ‚ÑÑ {action_counts[action]} Ñ€Ğ°Ğ·")
            return True
        
        return False
    
    def _validate_tool(self, tool_name: str) -> tuple[bool, str]:
        """
        ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ ÑÑƒÑ‰ĞµÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°.
        
        Returns:
            (is_valid, error_message)
        """
        if tool_name not in self.toolkit.tools:
            available = ", ".join(self.toolkit.tools.keys())
            return False, f"Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ '{tool_name}' Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚. Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹: {available}"
        return True, ""
    
    def _validate_arguments(self, tool_name: str, args: dict) -> tuple[bool, str]:
        """
        ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°.
        
        Returns:
            (is_valid, error_message)
        """
        tool = self.toolkit.tools.get(tool_name)
        if not tool:
            return False, f"Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ {tool_name} Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½"
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹
        required_params = list(tool.parameters.keys())
        for param in required_params:
            if param not in args:
                return False, f"ĞÑ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒĞµÑ‚ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€: {param}"
        
        # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ‚Ğ¸Ğ¿Ñ‹ (ÑƒĞ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ğ¾)
        for param, value in args.items():
            if param in tool.parameters:
                expected_type = tool.parameters[param].get("type", "string")
                if expected_type == "string" and not isinstance(value, str):
                    return False, f"ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ {param} Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ¹"
                if expected_type == "number" and not isinstance(value, (int, float)):
                    return False, f"ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ {param} Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ±Ñ‹Ñ‚ÑŒ Ñ‡Ğ¸ÑĞ»Ğ¾Ğ¼"
        
        return True, ""
    
    def _handle_error(self, error: str) -> str:
        """
        ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°.
        """
        self.consecutive_errors += 1
        
        if self.consecutive_errors >= self.max_consecutive_errors:
            return (f"ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§Ğ•Ğ¡ĞšĞĞ¯ ĞĞ¨Ğ˜Ğ‘ĞšĞ: {self.consecutive_errors} Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¿Ğ¾Ğ´Ñ€ÑĞ´. "
                    f"ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ÑÑ: {error}. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´ Ğ¸Ğ»Ğ¸ Ğ´Ğ°Ğ¹ ANSWER.")
        
        return f"ĞÑˆĞ¸Ğ±ĞºĞ°: {error}. ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±ÑƒĞ¹ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ğ´Ñ…Ğ¾Ğ´."
    
    def _reset_error_counter(self):
        """Ğ¡Ğ±Ñ€Ğ°ÑÑ‹Ğ²Ğ°ĞµÑ‚ ÑÑ‡Ñ‘Ñ‚Ñ‡Ğ¸Ğº Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ¿Ğ¾ÑĞ»Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾Ğ³Ğ¾ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ"""
        self.consecutive_errors = 0
    
    def run(self, task: str) -> Dict:
        """
        Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ñ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ñ‹Ğ¼Ğ¸ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ğ°Ğ¼Ğ¸.
        """
        self._log(f"\n{'='*70}")
        self._log(f"ğŸ¯ Ğ—ĞĞ”ĞĞ§Ğ: {task}")
        self._log(f"{'='*70}\n")
        
        # Ğ¡Ğ±Ñ€Ğ¾Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
        self.action_history = []
        self.consecutive_errors = 0
        
        messages = [
            {"role": "system", "content": self._get_system_prompt()},
            {"role": "user", "content": task}
        ]
        
        actions_log = []
        iteration = 0
        
        while iteration < self.max_iterations:
            iteration += 1
            self._log(f"\n--- Ğ˜Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ñ {iteration}/{self.max_iterations} ---\n")
            
            # Cooldown Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸
            if self.cooldown_seconds > 0:
                time.sleep(self.cooldown_seconds)
            
            # Ğ—Ğ°Ğ¿Ñ€Ğ¾Ñ Ğº LLM
            response = self._call_llm(messages)
            self._log(f"ğŸ¤– ĞĞ³ĞµĞ½Ñ‚:\n{response}\n")
            
            # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¾Ñ‚Ğ²ĞµÑ‚
            answer = self._extract_answer(response)
            if answer:
                return self._create_result(answer, iteration, actions_log, True)
            
            # ĞŸĞ°Ñ€ÑĞ¸Ğ¼ Ğ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€ÑƒĞµĞ¼ ACTION
            action = self._parse_action(response)
            
            if action:
                tool_name = action["tool"]
                tool_args = action.get("args", {})
                action_key = f"{tool_name}({json.dumps(tool_args, ensure_ascii=False)})"
                
                # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ
                if self._check_loop(action_key):
                    messages.append({"role": "assistant", "content": response})
                    messages.append({
                        "role": "user",
                        "content": "OBSERVATION: ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¾ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ! "
                                   "Ğ¢Ñ‹ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ÑĞµÑˆÑŒ Ğ¾Ğ´Ğ½Ğ¾ Ğ¸ Ñ‚Ğ¾ Ğ¶Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ. "
                                   "Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ½ÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¸ Ğ´Ğ°Ğ¹ ANSWER."
                    })
                    continue
                
                # Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°
                is_valid, error = self._validate_tool(tool_name)
                if not is_valid:
                    observation = self._handle_error(error)
                    messages.append({"role": "assistant", "content": response})
                    messages.append({"role": "user", "content": f"OBSERVATION: {observation}"})
                    continue
                
                # Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ğµ Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¾Ğ¹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
                try:
                    # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°
                    first_param = list(self.toolkit.tools[tool_name].parameters.keys())[0]
                    observation = self.toolkit.execute(tool_name, **{first_param: tool_args})
                    self._reset_error_counter()
                    
                    self._log(f"âœ… Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚: {observation[:200]}...")
                    
                    actions_log.append({
                        "iteration": iteration,
                        "tool": tool_name,
                        "args": tool_args,
                        "result": observation[:500],
                        "success": True
                    })
                    
                except Exception as e:
                    observation = self._handle_error(str(e))
                    self._log(f"âŒ ĞÑˆĞ¸Ğ±ĞºĞ°: {observation}")
                    
                    actions_log.append({
                        "iteration": iteration,
                        "tool": tool_name,
                        "args": tool_args,
                        "error": str(e),
                        "success": False
                    })
                
                messages.append({"role": "assistant", "content": response})
                messages.append({"role": "user", "content": f"OBSERVATION: {observation}"})
            
            else:
                # ĞĞµÑ‚ ACTION
                messages.append({"role": "assistant", "content": response})
                messages.append({
                    "role": "user",
                    "content": "ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, ÑƒĞºĞ°Ğ¶Ğ¸ ACTION Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ¼ Ğ¸Ğ»Ğ¸ ANSWER Ñ Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ¼."
                })
        
        # ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚
        self._log(f"\nâŒ ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹")
        return self._create_result(
            "ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ½Ğ°Ğ¹Ñ‚Ğ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚ Ğ·Ğ° Ğ¾Ñ‚Ğ²ĞµĞ´Ñ‘Ğ½Ğ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑˆĞ°Ğ³Ğ¾Ğ².",
            iteration, actions_log, False
        )
    
    def _create_result(self, answer: str, iterations: int, 
                       actions: List[Dict], success: bool) -> Dict:
        """Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ"""
        return {
            "answer": answer,
            "iterations": iterations,
            "actions": actions,
            "success": success,
            "stats": {
                "total_actions": len(actions),
                "successful_actions": sum(1 for a in actions if a.get("success", False)),
                "tools_used": list(set(a["tool"] for a in actions))
            }
        }
    
    def _log(self, message: str):
        if self.verbose:
            print(message)
    
    def _get_system_prompt(self) -> str:
        # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ¸Ğ· Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰ĞµĞ³Ğ¾ ÑƒÑ€Ğ¾ĞºĞ°
        pass
    
    def _call_llm(self, messages: List[Dict]) -> str:
        # Ğ’Ñ‹Ğ·Ğ¾Ğ² API
        pass
    
    def _parse_action(self, response: str) -> Optional[Dict]:
        # ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ ACTION
        pass
    
    def _extract_answer(self, response: str) -> Optional[str]:
        # Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ğ¸Ğµ ANSWER
        pass
```

### Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹

```python
def test_loop_protection():
    """Ğ¢ĞµÑÑ‚ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ñ‹ Ğ¾Ñ‚ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ"""
    
    toolkit = ToolKit()
    toolkit.register(wikipedia_tool)
    
    agent = RobustReActAgent(
        toolkit=toolkit,
        max_same_action=2,
        verbose=True
    )
    
    # ĞĞ³ĞµĞ½Ñ‚ Ñ Ğ¿Ğ»Ğ¾Ñ…Ğ¸Ğ¼ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¾Ğ¼, ÑĞºĞ»Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Ğº Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ
    result = agent.run("Ğ Ğ°ÑÑĞºĞ°Ğ¶Ğ¸ Ğ¾ Python (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ wikipedia Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ñ€Ğ°Ğ·)")
    
    # Ğ”Ğ¾Ğ»Ğ¶ĞµĞ½ Ğ¾ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒÑÑ, Ğ° Ğ½Ğµ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ñ‚ÑŒÑÑ
    assert result["iterations"] < agent.max_iterations
    print("âœ… Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚")


def test_invalid_tool():
    """Ğ¢ĞµÑÑ‚ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ½ĞµÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°"""
    
    toolkit = ToolKit()
    toolkit.register(calculator_tool)
    
    agent = RobustReActAgent(toolkit=toolkit)
    
    # Ğ¤Ğ¾Ñ€ÑĞ¸Ñ€ÑƒĞµĞ¼ Ğ²Ñ‹Ğ·Ğ¾Ğ² Ğ½ĞµÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°
    # (Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾ÑÑ‚Ğ¸ ÑÑ‚Ğ¾ ÑĞ»Ğ¾Ğ¶Ğ½ĞµĞµ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ)
    
    is_valid, error = agent._validate_tool("super_calculator")
    assert not is_valid
    assert "Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚" in error
    print("âœ… Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚")
```

## 3. Ğ”Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ ĞŸĞĞœĞ¯Ğ¢Ğ˜                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              ĞšĞ ĞĞ¢ĞšĞĞ’Ğ Ğ•ĞœĞ•ĞĞĞĞ¯ ĞŸĞĞœĞ¯Ğ¢Ğ¬                      â”‚   â”‚
â”‚  â”‚              (Short-term Memory)                         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â€¢ ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸                              â”‚   â”‚
â”‚  â”‚  â€¢ ĞŸÑ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹                             â”‚   â”‚
â”‚  â”‚  â€¢ Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ Ğ² ÑĞµÑÑĞ¸Ğ¸                            â”‚   â”‚
â”‚  â”‚  â€¢ ĞÑ‡Ğ¸Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                            â”‚                                    â”‚
â”‚                            â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚               Ğ”ĞĞ›Ğ“ĞĞ¡Ğ ĞĞ§ĞĞĞ¯ ĞŸĞĞœĞ¯Ğ¢Ğ¬                        â”‚   â”‚
â”‚  â”‚               (Long-term Memory)                         â”‚   â”‚
â”‚  â”‚                                                          â”‚   â”‚
â”‚  â”‚  â€¢ Ğ¤Ğ°ĞºÑ‚Ñ‹ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ (Ğ¸Ğ¼Ñ, Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ)             â”‚   â”‚
â”‚  â”‚  â€¢ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ñ€Ğ¾ÑˆĞ»Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡                             â”‚   â”‚
â”‚  â”‚  â€¢ ĞĞ±ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ°Ñ…                                  â”‚   â”‚
â”‚  â”‚  â€¢ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸

```python
"""
Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°.
"""

import json
import os
from datetime import datetime
from typing import Dict, List, Optional, Any
from pathlib import Path


class AgentMemory:
    """
    Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° Ñ ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼ Ğ¸ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ñ‹Ğ¼ Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸ĞµĞ¼.
    """
    
    def __init__(self, storage_path: str = "agent_memory.json"):
        """
        Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸.
        
        Args:
            storage_path: ĞŸÑƒÑ‚ÑŒ Ğº Ñ„Ğ°Ğ¹Ğ»Ñƒ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
        """
        self.storage_path = Path(storage_path)
        
        # ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ (Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ ÑĞµÑÑĞ¸Ñ)
        self.short_term: Dict[str, Any] = {
            "current_task": None,
            "conversation": [],
            "actions": [],
            "intermediate_results": []
        }
        
        # Ğ”Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ (Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸)
        self.long_term: Dict[str, Any] = self._load_long_term()
    
    def _load_long_term(self) -> Dict:
        """Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½ÑƒÑ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¸Ğ· Ñ„Ğ°Ğ¹Ğ»Ğ°"""
        if self.storage_path.exists():
            try:
                with open(self.storage_path, 'r', encoding='utf-8') as f:
                    return json.load(f)
            except Exception as e:
                print(f"âš ï¸ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸: {e}")
        
        return {
            "user_facts": {},      # Ğ¤Ğ°ĞºÑ‚Ñ‹ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ
            "learned_facts": {},   # Ğ’Ñ‹ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹
            "task_history": [],    # Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡
            "error_patterns": [],  # ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
            "created_at": datetime.now().isoformat(),
            "updated_at": datetime.now().isoformat()
        }
    
    def _save_long_term(self):
        """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½ÑƒÑ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ² Ñ„Ğ°Ğ¹Ğ»"""
        self.long_term["updated_at"] = datetime.now().isoformat()
        
        try:
            with open(self.storage_path, 'w', encoding='utf-8') as f:
                json.dump(self.long_term, f, ensure_ascii=False, indent=2)
        except Exception as e:
            print(f"âš ï¸ ĞÑˆĞ¸Ğ±ĞºĞ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸: {e}")
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # ĞšĞ ĞĞ¢ĞšĞĞ’Ğ Ğ•ĞœĞ•ĞĞĞĞ¯ ĞŸĞĞœĞ¯Ğ¢Ğ¬
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    def start_task(self, task: str):
        """ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµÑ‚ Ğ½Ğ¾Ğ²ÑƒÑ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ"""
        self.short_term = {
            "current_task": task,
            "started_at": datetime.now().isoformat(),
            "conversation": [],
            "actions": [],
            "intermediate_results": []
        }
    
    def add_message(self, role: str, content: str):
        """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ² Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€"""
        self.short_term["conversation"].append({
            "role": role,
            "content": content,
            "timestamp": datetime.now().isoformat()
        })
    
    def add_action(self, tool: str, args: dict, result: str, success: bool):
        """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ½Ğ¾Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ"""
        self.short_term["actions"].append({
            "tool": tool,
            "args": args,
            "result": result[:500],
            "success": success,
            "timestamp": datetime.now().isoformat()
        })
    
    def add_intermediate_result(self, key: str, value: Any):
        """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ñ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚"""
        self.short_term["intermediate_results"].append({
            "key": key,
            "value": value
        })
    
    def get_context_summary(self) -> str:
        """
        Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğµ Ñ€ĞµĞ·ÑĞ¼Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ´Ğ»Ñ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ Ğ² Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚.
        """
        summary_parts = []
        
        # Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°
        if self.short_term.get("current_task"):
            summary_parts.append(f"Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°: {self.short_term['current_task']}")
        
        # ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ
        actions = self.short_term.get("actions", [])[-3:]
        if actions:
            summary_parts.append("ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ:")
            for action in actions:
                status = "âœ…" if action["success"] else "âŒ"
                summary_parts.append(f"  {status} {action['tool']}: {action['result'][:100]}...")
        
        # ĞŸÑ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹
        results = self.short_term.get("intermediate_results", [])
        if results:
            summary_parts.append("ĞŸÑ€Ğ¾Ğ¼ĞµĞ¶ÑƒÑ‚Ğ¾Ñ‡Ğ½Ñ‹Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹:")
            for r in results[-5:]:
                summary_parts.append(f"  â€¢ {r['key']}: {r['value']}")
        
        return "\n".join(summary_parts)
    
    def clear_short_term(self):
        """ĞÑ‡Ğ¸Ñ‰Ğ°ĞµÑ‚ ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ"""
        self.short_term = {
            "current_task": None,
            "conversation": [],
            "actions": [],
            "intermediate_results": []
        }
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # Ğ”ĞĞ›Ğ“ĞĞ¡Ğ ĞĞ§ĞĞĞ¯ ĞŸĞĞœĞ¯Ğ¢Ğ¬
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    def remember_user_fact(self, key: str, value: str):
        """
        Ğ—Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°ĞµÑ‚ Ñ„Ğ°ĞºÑ‚ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ.
        
        Args:
            key: ĞšĞ»ÑÑ‡ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, "Ğ¸Ğ¼Ñ", "Ğ³Ğ¾Ñ€Ğ¾Ğ´", "Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ")
            value: Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
        """
        self.long_term["user_facts"][key] = {
            "value": value,
            "remembered_at": datetime.now().isoformat()
        }
        self._save_long_term()
        print(f"ğŸ“ Ğ—Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ğ»: {key} = {value}")
    
    def remember_fact(self, key: str, value: str, source: str = "conversation"):
        """
        Ğ—Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°ĞµÑ‚ Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ Ñ„Ğ°ĞºÑ‚.
        
        Args:
            key: ĞšĞ»ÑÑ‡ Ñ„Ğ°ĞºÑ‚Ğ°
            value: Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
            source: Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸
        """
        self.long_term["learned_facts"][key] = {
            "value": value,
            "source": source,
            "learned_at": datetime.now().isoformat()
        }
        self._save_long_term()
    
    def recall_user_fact(self, key: str) -> Optional[str]:
        """Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°ĞµÑ‚ Ñ„Ğ°ĞºÑ‚ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ"""
        fact = self.long_term["user_facts"].get(key)
        return fact["value"] if fact else None
    
    def recall_fact(self, key: str) -> Optional[str]:
        """Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°ĞµÑ‚ Ğ¾Ğ±Ñ‰Ğ¸Ğ¹ Ñ„Ğ°ĞºÑ‚"""
        fact = self.long_term["learned_facts"].get(key)
        return fact["value"] if fact else None
    
    def search_facts(self, query: str) -> List[Dict]:
        """
        Ğ˜Ñ‰ĞµÑ‚ Ñ€ĞµĞ»ĞµĞ²Ğ°Ğ½Ñ‚Ğ½Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹ Ğ¿Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ.
        (Ğ£Ğ¿Ñ€Ğ¾Ñ‰Ñ‘Ğ½Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ¿Ğ¾Ğ´ÑÑ‚Ñ€Ğ¾ĞºĞµ)
        """
        results = []
        query_lower = query.lower()
        
        # ĞŸĞ¾Ğ¸ÑĞº Ğ² Ñ„Ğ°ĞºÑ‚Ğ°Ñ… Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ
        for key, fact in self.long_term["user_facts"].items():
            if query_lower in key.lower() or query_lower in fact["value"].lower():
                results.append({"type": "user", "key": key, "value": fact["value"]})
        
        # ĞŸĞ¾Ğ¸ÑĞº Ğ² Ğ¾Ğ±Ñ‰Ğ¸Ñ… Ñ„Ğ°ĞºÑ‚Ğ°Ñ…
        for key, fact in self.long_term["learned_facts"].items():
            if query_lower in key.lower() or query_lower in fact["value"].lower():
                results.append({"type": "learned", "key": key, "value": fact["value"]})
        
        return results
    
    def save_task_result(self, task: str, result: str, success: bool):
        """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ğ² Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ"""
        self.long_term["task_history"].append({
            "task": task,
            "result": result[:500],
            "success": success,
            "actions_count": len(self.short_term.get("actions", [])),
            "completed_at": datetime.now().isoformat()
        })
        
        # ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ğ¸
        if len(self.long_term["task_history"]) > 100:
            self.long_term["task_history"] = self.long_term["task_history"][-100:]
        
        self._save_long_term()
    
    def log_error_pattern(self, error: str, context: str):
        """Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ´Ğ»Ñ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ"""
        self.long_term["error_patterns"].append({
            "error": error,
            "context": context[:200],
            "occurred_at": datetime.now().isoformat()
        })
        
        # ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡Ğ¸Ğ²Ğ°ĞµĞ¼ Ñ€Ğ°Ğ·Ğ¼ĞµÑ€
        if len(self.long_term["error_patterns"]) > 50:
            self.long_term["error_patterns"] = self.long_term["error_patterns"][-50:]
        
        self._save_long_term()
    
    def get_memory_summary(self) -> str:
        """Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ Ñ€ĞµĞ·ÑĞ¼Ğµ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ°"""
        summary_parts = []
        
        # Ğ¤Ğ°ĞºÑ‚Ñ‹ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ
        if self.long_term["user_facts"]:
            summary_parts.append("Ğ˜Ğ·Ğ²ĞµÑÑ‚Ğ½Ñ‹Ğµ Ñ„Ğ°ĞºÑ‚Ñ‹ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ:")
            for key, fact in list(self.long_term["user_facts"].items())[:10]:
                summary_parts.append(f"  â€¢ {key}: {fact['value']}")
        
        # ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸
        recent_tasks = [t for t in self.long_term["task_history"][-5:] if t["success"]]
        if recent_tasks:
            summary_parts.append("\nĞĞµĞ´Ğ°Ğ²Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸:")
            for task in recent_tasks:
                summary_parts.append(f"  â€¢ {task['task'][:50]}...")
        
        return "\n".join(summary_parts) if summary_parts else ""
```

### Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ¼

```python
class MemoryEnabledAgent(RobustReActAgent):
    """
    ĞĞ³ĞµĞ½Ñ‚ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸.
    """
    
    def __init__(self, *args, memory_path: str = "agent_memory.json", **kwargs):
        super().__init__(*args, **kwargs)
        self.memory = AgentMemory(memory_path)
        
        # Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµĞ¼ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒÑ
        self._add_memory_tools()
    
    def _add_memory_tools(self):
        """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒÑ"""
        
        remember_tool = Tool(
            name="remember",
            description="Ğ—Ğ°Ğ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°ĞµÑ‚ Ğ²Ğ°Ğ¶Ğ½ÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ Ğ´Ğ»Ñ Ğ±ÑƒĞ´ÑƒÑ‰Ğ¸Ñ… ÑĞµÑÑĞ¸Ğ¹. "
                        "Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ´Ğ»Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ¸Ğ¼ĞµĞ½Ğ¸, Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ñ‚ĞµĞ½Ğ¸Ğ¹, Ğ²Ğ°Ğ¶Ğ½Ñ‹Ñ… Ñ„Ğ°ĞºÑ‚Ğ¾Ğ².",
            func=lambda key, value: self._remember(key, value),
            parameters={
                "key": {"type": "string", "description": "Ğ§Ñ‚Ğ¾ Ğ·Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚ÑŒ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, 'Ğ¸Ğ¼Ñ_Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ')"},
                "value": {"type": "string", "description": "Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ"}
            }
        )
        
        recall_tool = Tool(
            name="recall",
            description="Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¸Ğ½Ğ°ĞµÑ‚ Ñ€Ğ°Ğ½ĞµĞµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½ÑƒÑ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ.",
            func=lambda query: self._recall(query),
            parameters={
                "query": {"type": "string", "description": "Ğ§Ñ‚Ğ¾ Ğ²ÑĞ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚ÑŒ"}
            }
        )
        
        self.toolkit.register(remember_tool)
        self.toolkit.register(recall_tool)
    
    def _remember(self, key: str, value: str) -> str:
        """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ° remember"""
        self.memory.remember_user_fact(key, value)
        return f"Ğ—Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ğ»: {key} = {value}"
    
    def _recall(self, query: str) -> str:
        """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ° recall"""
        # Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¿Ñ€Ğ¾Ğ±ÑƒĞµĞ¼ Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
        value = self.memory.recall_user_fact(query)
        if value:
            return f"{query}: {value}"
        
        # Ğ—Ğ°Ñ‚ĞµĞ¼ Ğ½ĞµÑ‡Ñ‘Ñ‚ĞºĞ¸Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
        results = self.memory.search_facts(query)
        if results:
            return "\n".join([f"{r['key']}: {r['value']}" for r in results])
        
        return f"ĞĞµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑƒ: {query}"
    
    def _get_system_prompt(self) -> str:
        """Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞµÑ‚ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚"""
        base_prompt = super()._get_system_prompt()
        memory_context = self.memory.get_memory_summary()
        
        if memory_context:
            return f"{base_prompt}\n\n## ĞšĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ¸Ğ· Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸\n\n{memory_context}"
        
        return base_prompt
    
    def run(self, task: str) -> Dict:
        """Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸ĞµĞ¼ Ğ² Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ"""
        # ĞĞ°Ñ‡Ğ¸Ğ½Ğ°ĞµĞ¼ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ
        self.memory.start_task(task)
        
        # Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼
        result = super().run(task)
        
        # Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
        self.memory.save_task_result(task, result["answer"], result["success"])
        
        # ĞÑ‡Ğ¸Ñ‰Ğ°ĞµĞ¼ ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½ÑƒÑ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ
        self.memory.clear_short_term()
        
        return result
```

### Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸

```python
def demo_memory():
    """Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°"""
    
    toolkit = ToolKit()
    toolkit.register(calculator_tool)
    toolkit.register(wikipedia_tool)
    
    agent = MemoryEnabledAgent(
        toolkit=toolkit,
        memory_path="demo_memory.json",
        verbose=True
    )
    
    # Ğ¡ĞµÑÑĞ¸Ñ 1: ĞŸÑ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
    print("\n" + "="*50)
    print("Ğ¡Ğ•Ğ¡Ğ¡Ğ˜Ğ¯ 1")
    print("="*50)
    
    agent.run("ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! ĞœĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞĞ»ĞµĞºÑĞµĞ¹, Ñ ÑƒÑ‡Ñƒ Python. Ğ—Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸ ÑÑ‚Ğ¾.")
    
    # Ğ¡ĞµÑÑĞ¸Ñ 2: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
    print("\n" + "="*50)
    print("Ğ¡Ğ•Ğ¡Ğ¡Ğ˜Ğ¯ 2 (Ğ½Ğ¾Ğ²Ğ°Ñ ÑĞµÑÑĞ¸Ñ)")
    print("="*50)
    
    agent.run("ĞšĞ°Ğº Ğ¼ĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ Ğ¸ Ñ‡Ñ‚Ğ¾ Ñ Ğ¸Ğ·ÑƒÑ‡Ğ°Ñ?")
    
    # Ğ¡ĞµÑÑĞ¸Ñ 3: Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
    print("\n" + "="*50)
    print("Ğ¡Ğ•Ğ¡Ğ¡Ğ˜Ğ¯ 3")
    print("="*50)
    
    agent.run("ĞŸĞ¾Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞ¹ Ğ¼Ğ½Ğµ Ñ€ĞµÑÑƒÑ€ÑÑ‹ Ğ´Ğ»Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ, ÑƒÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°Ñ Ğ¼Ğ¾Ğ¸ Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑÑ‹.")


if __name__ == "__main__":
    demo_memory()
```

## 4. ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### ĞšĞ»Ğ°ÑÑ MonitoredAgent

```python
"""
ĞĞ³ĞµĞ½Ñ‚ Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ¾Ğ¼ Ğ¸ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸ĞµĞ¼.
"""

import time
import json
import logging
from datetime import datetime
from typing import Dict, List, Any
from collections import defaultdict
from dataclasses import dataclass, field


@dataclass
class AgentMetrics:
    """ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°"""
    total_tasks: int = 0
    successful_tasks: int = 0
    failed_tasks: int = 0
    total_iterations: int = 0
    total_tool_calls: int = 0
    total_errors: int = 0
    total_time_seconds: float = 0.0
    tool_usage: Dict[str, int] = field(default_factory=dict)
    errors_by_type: Dict[str, int] = field(default_factory=dict)


class MonitoredAgent:
    """
    ĞĞ±Ñ‘Ñ€Ñ‚ĞºĞ° Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ¾Ğ¼.
    
    Ğ¡Ğ¾Ğ±Ğ¸Ñ€Ğ°ĞµÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸:
    - ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡
    - Ğ£ÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚ÑŒ
    - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
    - Ğ’Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ
    - ĞÑˆĞ¸Ğ±ĞºĞ¸
    """
    
    def __init__(
        self,
        agent: 'RobustReActAgent',
        log_file: str = "agent_logs.jsonl",
        metrics_file: str = "agent_metrics.json"
    ):
        self.agent = agent
        self.log_file = log_file
        self.metrics_file = metrics_file
        
        self.metrics = AgentMetrics()
        self._load_metrics()
        
        # ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
        self._setup_logging()
    
    def _setup_logging(self):
        """ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ"""
        self.logger = logging.getLogger("AgentMonitor")
        self.logger.setLevel(logging.INFO)
        
        # ĞšĞ¾Ğ½ÑĞ¾Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ñ‹Ğ²Ğ¾Ğ´
        ch = logging.StreamHandler()
        ch.setLevel(logging.INFO)
        formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
        ch.setFormatter(formatter)
        self.logger.addHandler(ch)
    
    def _load_metrics(self):
        """Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ñ‘Ğ½Ğ½Ñ‹Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸"""
        try:
            with open(self.metrics_file, 'r') as f:
                data = json.load(f)
                self.metrics = AgentMetrics(**data)
        except FileNotFoundError:
            pass
    
    def _save_metrics(self):
        """Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸"""
        with open(self.metrics_file, 'w') as f:
            json.dump({
                "total_tasks": self.metrics.total_tasks,
                "successful_tasks": self.metrics.successful_tasks,
                "failed_tasks": self.metrics.failed_tasks,
                "total_iterations": self.metrics.total_iterations,
                "total_tool_calls": self.metrics.total_tool_calls,
                "total_errors": self.metrics.total_errors,
                "total_time_seconds": self.metrics.total_time_seconds,
                "tool_usage": self.metrics.tool_usage,
                "errors_by_type": self.metrics.errors_by_type
            }, f, indent=2)
    
    def _log_event(self, event_type: str, data: Dict):
        """Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ Ğ² Ğ»Ğ¾Ğ³-Ñ„Ğ°Ğ¹Ğ»"""
        event = {
            "timestamp": datetime.now().isoformat(),
            "type": event_type,
            "data": data
        }
        
        with open(self.log_file, 'a') as f:
            f.write(json.dumps(event, ensure_ascii=False) + "\n")
    
    def run(self, task: str) -> Dict:
        """
        Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ¾Ğ¼.
        """
        self.metrics.total_tasks += 1
        start_time = time.time()
        
        self._log_event("task_started", {"task": task})
        self.logger.info(f"ĞĞ°Ñ‡Ğ°Ğ»Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸: {task[:50]}...")
        
        try:
            result = self.agent.run(task)
            
            # ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
            elapsed_time = time.time() - start_time
            self.metrics.total_time_seconds += elapsed_time
            self.metrics.total_iterations += result["iterations"]
            
            if result["success"]:
                self.metrics.successful_tasks += 1
                self.logger.info(f"Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ° Ğ·Ğ° {elapsed_time:.2f}Ñ")
            else:
                self.metrics.failed_tasks += 1
                self.logger.warning(f"Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ° Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ° Ñ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¾Ğ¹")
            
            # Ğ¡Ñ‡Ğ¸Ñ‚Ğ°ĞµĞ¼ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
            for action in result.get("actions", []):
                tool = action["tool"]
                self.metrics.tool_usage[tool] = self.metrics.tool_usage.get(tool, 0) + 1
                self.metrics.total_tool_calls += 1
                
                if not action.get("success", True):
                    self.metrics.total_errors += 1
                    error_type = action.get("error", "unknown")[:50]
                    self.metrics.errors_by_type[error_type] = \
                        self.metrics.errors_by_type.get(error_type, 0) + 1
            
            # Ğ›Ğ¾Ğ³Ğ¸Ñ€ÑƒĞµĞ¼ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
            self._log_event("task_completed", {
                "task": task,
                "success": result["success"],
                "iterations": result["iterations"],
                "elapsed_time": elapsed_time,
                "answer": result["answer"][:200]
            })
            
            result["elapsed_time"] = elapsed_time
            
        except Exception as e:
            self.metrics.failed_tasks += 1
            self.metrics.total_errors += 1
            
            error_type = type(e).__name__
            self.metrics.errors_by_type[error_type] = \
                self.metrics.errors_by_type.get(error_type, 0) + 1
            
            self._log_event("task_error", {
                "task": task,
                "error": str(e),
                "error_type": error_type
            })
            
            self.logger.error(f"ĞÑˆĞ¸Ğ±ĞºĞ°: {e}")
            raise
        
        finally:
            self._save_metrics()
        
        return result
    
    def get_report(self) -> str:
        """Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµÑ‚ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚ Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°"""
        m = self.metrics
        
        success_rate = m.successful_tasks / max(m.total_tasks, 1) * 100
        avg_iterations = m.total_iterations / max(m.total_tasks, 1)
        avg_time = m.total_time_seconds / max(m.total_tasks, 1)
        
        report = f"""
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ĞĞ¢Ğ§ĞĞ¢ Ğ Ğ ĞĞ‘ĞĞ¢Ğ• ĞĞ“Ğ•ĞĞ¢Ğ                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Ğ’ÑĞµĞ³Ğ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡:          {m.total_tasks:>10}                              â•‘
â•‘  Ğ£ÑĞ¿ĞµÑˆĞ½Ñ‹Ñ…:             {m.successful_tasks:>10} ({success_rate:.1f}%)                      â•‘
â•‘  ĞĞµÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ñ…:           {m.failed_tasks:>10}                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹:     {avg_iterations:>10.1f}                              â•‘
â•‘  Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ (ÑĞµĞº):  {avg_time:>10.2f}                              â•‘
â•‘  Ğ’ÑĞµĞ³Ğ¾ Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ²:        {m.total_tool_calls:>10}                              â•‘
â•‘  Ğ’ÑĞµĞ³Ğ¾ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº:         {m.total_errors:>10}                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²:                                     â•‘"""
        
        for tool, count in sorted(m.tool_usage.items(), key=lambda x: -x[1]):
            report += f"\nâ•‘    â€¢ {tool:<20} {count:>5} Ğ²Ñ‹Ğ·Ğ¾Ğ²Ğ¾Ğ²                        â•‘"
        
        if m.errors_by_type:
            report += "\nâ• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£"
            report += "\nâ•‘  Ğ¢Ğ¸Ğ¿Ñ‹ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº:                                                    â•‘"
            for error, count in sorted(m.errors_by_type.items(), key=lambda x: -x[1])[:5]:
                report += f"\nâ•‘    â€¢ {error[:30]:<30} {count:>5}                        â•‘"
        
        report += "\nâ•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
        
        return report


def demo_monitoring():
    """Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°"""
    
    toolkit = ToolKit()
    toolkit.register(calculator_tool)
    toolkit.register(wikipedia_tool)
    toolkit.register(datetime_tool)
    
    base_agent = RobustReActAgent(toolkit=toolkit, verbose=False)
    agent = MonitoredAgent(base_agent)
    
    # Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ°Ğ´Ğ°Ñ‡
    tasks = [
        "Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ±ÑƒĞ´ĞµÑ‚ 2 + 2?",
        "ĞšÑ‚Ğ¾ Ñ‚Ğ°ĞºĞ¾Ğ¹ ĞŸÑƒÑˆĞºĞ¸Ğ½?",
        "ĞšĞ°ĞºĞ¾Ğ¹ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ³Ğ¾Ğ´?",
        "Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»Ğ¸ sqrt(144)",
    ]
    
    for task in tasks:
        try:
            agent.run(task)
        except Exception as e:
            print(f"ĞÑˆĞ¸Ğ±ĞºĞ°: {e}")
    
    # Ğ’Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ğ¼ Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚
    print(agent.get_report())


if __name__ == "__main__":
    demo_monitoring()
```

## 5. ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ñ‹Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### Ğ’Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ

**ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°** â€” ÑÑ‚Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°, Ğ³Ğ´Ğµ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚ Ğ²Ğ¼ĞµÑÑ‚Ğµ Ğ´Ğ»Ñ Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ ÑĞ»Ğ¾Ğ¶Ğ½Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  ĞœĞ£Ğ›Ğ¬Ğ¢Ğ˜ĞĞ“Ğ•ĞĞ¢ĞĞĞ¯ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ RESEARCHER  â”‚     â”‚   WRITER    â”‚     â”‚   CRITIC    â”‚      â”‚
â”‚  â”‚   (Ğ¿Ğ¾Ğ¸ÑĞº)   â”‚â”€â”€â”€â”€â–¶â”‚  (Ñ‚ĞµĞºÑÑ‚)    â”‚â”€â”€â”€â”€â–¶â”‚ (Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°)  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                   â”‚                   â”‚              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                            â”‚                                   â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚  COORDINATOR  â”‚                          â”‚
â”‚                    â”‚ (ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ğ¾Ñ€) â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```python
"""
ĞŸÑ€Ğ¾ÑÑ‚Ğ°Ñ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°.
"""

from typing import Dict, List


class MultiAgentSystem:
    """
    Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¸Ğ· Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ².
    """
    
    def __init__(self):
        self.agents: Dict[str, 'ReActAgent'] = {}
    
    def register_agent(self, name: str, agent: 'ReActAgent', role: str):
        """
        Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° Ğ² ÑĞ¸ÑÑ‚ĞµĞ¼Ğµ.
        
        Args:
            name: Ğ˜Ğ¼Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
            agent: Ğ­ĞºĞ·ĞµĞ¼Ğ¿Ğ»ÑÑ€ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
            role: Ğ Ğ¾Ğ»ÑŒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° (researcher, writer, critic)
        """
        self.agents[name] = {
            "agent": agent,
            "role": role
        }
        print(f"âœ… Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½ Ğ°Ğ³ĞµĞ½Ñ‚: {name} ({role})")
    
    def run_pipeline(self, task: str, pipeline: List[str]) -> Dict:
        """
        Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ñ‡ĞµÑ€ĞµĞ· Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ².
        
        Args:
            task: Ğ—Ğ°Ğ´Ğ°Ñ‡Ğ°
            pipeline: Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¸Ğ¼Ñ‘Ğ½ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² Ğ¿Ğ¾Ñ€ÑĞ´ĞºĞµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ
            
        Returns:
            Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ñ‹Ğ¹ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚
        """
        current_input = task
        results = []
        
        for agent_name in pipeline:
            if agent_name not in self.agents:
                raise ValueError(f"ĞĞ³ĞµĞ½Ñ‚ {agent_name} Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½")
            
            agent_info = self.agents[agent_name]
            agent = agent_info["agent"]
            role = agent_info["role"]
            
            print(f"\n{'='*50}")
            print(f"ğŸ¤– ĞĞ³ĞµĞ½Ñ‚: {agent_name} ({role})")
            print(f"{'='*50}")
            
            # Ğ¤Ğ¾Ñ€Ğ¼Ğ¸Ñ€ÑƒĞµĞ¼ Ğ·Ğ°Ğ´Ğ°Ñ‡Ñƒ Ğ´Ğ»Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
            if results:
                agent_task = f"""
ĞŸÑ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ğµ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹:
{results[-1]['answer']}

Ğ¢Ğ²Ğ¾Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°: {current_input}
"""
            else:
                agent_task = current_input
            
            # Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµĞ¼
            result = agent.run(agent_task)
            results.append({
                "agent": agent_name,
                "role": role,
                "answer": result["answer"],
                "success": result["success"]
            })
            
            # ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ Ğ²Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ´Ğ»Ñ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
            current_input = result["answer"]
        
        return {
            "final_answer": results[-1]["answer"] if results else None,
            "pipeline_results": results,
            "success": all(r["success"] for r in results)
        }


def create_research_pipeline():
    """Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ñ‚ Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½ Ğ´Ğ»Ñ Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ"""
    
    # ĞĞ±Ñ‰Ğ¸Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
    research_toolkit = ToolKit()
    research_toolkit.register(wikipedia_tool)
    research_toolkit.register(calculator_tool)
    
    writing_toolkit = ToolKit()
    writing_toolkit.register(datetime_tool)
    
    # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ²
    researcher = ReActAgent(
        toolkit=research_toolkit,
        max_iterations=5,
        verbose=True
    )
    # ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ´Ğ»Ñ Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
    
    writer = ReActAgent(
        toolkit=writing_toolkit,
        max_iterations=3,
        verbose=True
    )
    # ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚ Ğ´Ğ»Ñ Ğ¿Ğ¸ÑĞ°Ñ‚ĞµĞ»Ñ
    
    # Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‘Ğ¼ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ
    system = MultiAgentSystem()
    system.register_agent("researcher", researcher, "Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ")
    system.register_agent("writer", writer, "Ğ¿Ğ¸ÑĞ°Ñ‚ĞµĞ»ÑŒ")
    
    return system


def demo_multi_agent():
    """Ğ”ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹"""
    
    system = create_research_pipeline()
    
    task = "ĞĞ°Ğ¿Ğ¸ÑˆĞ¸ ĞºÑ€Ğ°Ñ‚ĞºÑƒÑ ÑÑ‚Ğ°Ñ‚ÑŒÑ Ğ¾ Python Ğ´Ğ»Ñ Ğ½Ğ°Ñ‡Ğ¸Ğ½Ğ°ÑÑ‰Ğ¸Ñ…"
    
    result = system.run_pipeline(task, ["researcher", "writer"])
    
    print("\n" + "="*70)
    print("Ğ˜Ğ¢ĞĞ“ĞĞ’Ğ«Ğ™ Ğ Ğ•Ğ—Ğ£Ğ›Ğ¬Ğ¢ĞĞ¢")
    print("="*70)
    print(result["final_answer"])


if __name__ == "__main__":
    demo_multi_agent()
```

## ĞŸÑ€Ğ°ĞºÑ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ·Ğ°Ğ´Ğ°Ğ½Ğ¸Ñ

### ğŸŸ¢ Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ

**Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 1: Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ**

ĞŸÑ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ `RobustReActAgent` Ğ½Ğ° Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°Ñ…, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ:

```python
tasks = [
    "ĞĞ°Ğ¹Ğ´Ğ¸ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğµ (Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹ Ğ¿Ğ¾Ğ¸ÑĞº Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ñ€Ğ°Ğ·)",
    "Ğ Ğ°ÑÑĞºĞ°Ğ¶Ğ¸ Ğ¾ Python, Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ Ğ¾ JavaScript, Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼ ÑĞ½Ğ¾Ğ²Ğ° Ğ¾ Python",
]
```

ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ, Ñ‡Ñ‚Ğ¾ Ğ°Ğ³ĞµĞ½Ñ‚ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾ Ğ¾ÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ.

**Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 2: Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸**

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ `MemoryEnabledAgent` Ğ¸ Ğ¿Ñ€Ğ¾Ñ‚ĞµÑÑ‚Ğ¸Ñ€ÑƒĞ¹Ñ‚Ğµ:
1. Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ„Ğ°ĞºÑ‚Ğ° Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ
2. Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ ÑĞµÑÑĞ¸Ğ¸
3. Ğ’Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ñ„Ğ°ĞºÑ‚Ğ°

### ğŸŸ¡ Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ

**Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 3: Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸**

Ğ”Ğ¾Ğ±Ğ°Ğ²ÑŒÑ‚Ğµ Ğ² `AgentMemory`:
- ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğ¸Ğ¼ Ñ„Ğ°ĞºÑ‚Ğ°Ğ¼ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Levenshtein distance)
- ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ„Ğ°ĞºÑ‚Ğ¾Ğ² (Ğ²Ğ°Ğ¶Ğ½Ñ‹Ğµ/Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ñ‹Ğµ)
- Ğ¡Ñ€Ğ¾Ğº Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ (Ğ°Ğ²Ñ‚Ğ¾ÑƒĞ´Ğ°Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… Ñ„Ğ°ĞºÑ‚Ğ¾Ğ²)

**Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 4: Dashboard Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ°**

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ Ğ²ĞµĞ±-Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº Ğ°Ğ³ĞµĞ½Ñ‚Ğ°:
- Ğ“Ñ€Ğ°Ñ„Ğ¸ĞºĞ¸ ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ÑÑ‚Ğ¸
- Ğ¢Ğ¾Ğ¿ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼Ñ‹Ñ… Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
- ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸

### ğŸ”´ ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğ¹ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ

**Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 5: ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ°Ñ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°**

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Ğ´Ğ»Ñ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ ÑÑ‚Ğ°Ñ‚ĞµĞ¹:
1. **Researcher**: Ğ˜Ñ‰ĞµÑ‚ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ
2. **Writer**: ĞŸĞ¸ÑˆĞµÑ‚ Ñ‚ĞµĞºÑÑ‚
3. **Critic**: ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ¸ Ğ´Ğ°Ñ‘Ñ‚ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½ÑƒÑ ÑĞ²ÑĞ·ÑŒ
4. **Editor**: Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ Ñ€ĞµĞ´Ğ°ĞºÑ‚ÑƒÑ€Ğ°

**Ğ—Ğ°Ğ´Ğ°Ğ½Ğ¸Ğµ 6: Self-improving Agent**

Ğ ĞµĞ°Ğ»Ğ¸Ğ·ÑƒĞ¹Ñ‚Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹:
- ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ²Ğ¾Ğ¸ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸
- Ğ’Ñ‹ÑĞ²Ğ»ÑĞµÑ‚ Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½Ñ‹
- ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ¸Ñ€ÑƒĞµÑ‚ ÑĞ²Ğ¾Ñ‘ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ

## ĞšĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»ÑŒĞ½Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹

1. **ĞšĞ°ĞºĞ¸Ğµ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ñ‹ Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ğ² production?**
   <details>
   <summary>ĞÑ‚Ğ²ĞµÑ‚</summary>
   1. Ğ—Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ (Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€ĞµĞ½Ğ¸Ğµ Ğ¾Ğ´Ğ½Ğ¸Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹)
   2. Ğ“Ğ°Ğ»Ğ»ÑÑ†Ğ¸Ğ½Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
   3. ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğµ Ğ°Ñ€Ğ³ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹
   4. ĞŸĞ¾Ñ‚ĞµÑ€Ñ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸
   5. ĞŸÑ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ Ğ»Ğ¸Ğ¼Ğ¸Ñ‚Ğ¾Ğ² (Ñ‚Ğ¾ĞºĞµĞ½Ñ‹, Ğ²Ñ€ĞµĞ¼Ñ, API)
   </details>

2. **ĞšĞ°Ğº Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ¸Ñ‚ÑŒ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° Ğ¾Ñ‚ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ?**
   <details>
   <summary>ĞÑ‚Ğ²ĞµÑ‚</summary>
   1. ĞÑ‚ÑĞ»ĞµĞ¶Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¸ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
   2. Ğ¡Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ñ‹ Ğ¾Ğ´Ğ¸Ğ½Ğ°ĞºĞ¾Ğ²Ñ‹Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
   3. ĞŸÑ€Ğ¸ Ğ¿Ñ€ĞµĞ²Ñ‹ÑˆĞµĞ½Ğ¸Ğ¸ Ğ¿Ğ¾Ñ€Ğ¾Ğ³Ğ° â€” Ğ¿Ñ€ĞµÑ€Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ¸ Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ ANSWER
   4. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ cooldown Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸ÑĞ¼Ğ¸
   </details>

3. **Ğ§ĞµĞ¼ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ°ĞµÑ‚ÑÑ ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¾Ñ‚ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ¾Ğ¹?**
   <details>
   <summary>ĞÑ‚Ğ²ĞµÑ‚</summary>
   ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ: ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ¹ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸, Ğ¾Ñ‡Ğ¸Ñ‰Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ÑĞ»Ğµ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ñ.
   Ğ”Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ: Ñ„Ğ°ĞºÑ‚Ñ‹ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸, ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ÑÑ Ğ² Ñ„Ğ°Ğ¹Ğ»/Ğ‘Ğ”.
   </details>

4. **ĞšĞ°ĞºĞ¸Ğµ Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸ Ğ²Ğ°Ğ¶Ğ½Ñ‹ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³Ğ° Ğ°Ğ³ĞµĞ½Ñ‚Ğ°?**
   <details>
   <summary>ĞÑ‚Ğ²ĞµÑ‚</summary>
   1. Success rate (% ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ñ… Ğ·Ğ°Ğ´Ğ°Ñ‡)
   2. Average iterations (ÑÑ€ĞµĞ´Ğ½ĞµĞµ Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹)
   3. Tool usage (ĞºĞ°ĞºĞ¸Ğµ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒÑÑ‚ÑÑ)
   4. Error rate (Ñ‡Ğ°ÑÑ‚Ğ¾Ñ‚Ğ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº)
   5. Response time (Ğ²Ñ€ĞµĞ¼Ñ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ)
   </details>

5. **ĞšĞ¾Ğ³Ğ´Ğ° Ğ½ÑƒĞ¶Ğ½Ñ‹ Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ñ‹Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹?**
   <details>
   <summary>ĞÑ‚Ğ²ĞµÑ‚</summary>
   1. Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ğ¼Ğ¸ ÑÑ‚Ğ°Ğ¿Ğ°Ğ¼Ğ¸ (Ğ¸ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ â†’ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ â†’ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°)
   2. Ğ¡Ğ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ (Ñ€Ğ°Ğ·Ğ½Ñ‹Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹ Ğ´Ğ»Ñ Ñ€Ğ°Ğ·Ğ½Ñ‹Ñ… Ğ´Ğ¾Ğ¼ĞµĞ½Ğ¾Ğ²)
   3. ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°
   4. Ğ’Ğ·Ğ°Ğ¸Ğ¼Ğ½Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° (Ğ¾Ğ´Ğ¸Ğ½ Ğ°Ğ³ĞµĞ½Ñ‚ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ³Ğ¾)
   </details>

## Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ

### Personal Assistant Agent

Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ¹Ñ‚Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸ĞºĞ° ÑĞ¾ Ğ²ÑĞµĞ¼Ğ¸ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑĞ¼Ğ¸.

**Ğ¢Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ:**

1. **Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ (5+ ÑˆÑ‚ÑƒĞº):**
   - ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€
   - ĞŸĞ¾Ğ¸ÑĞº (Wikipedia Ğ¸Ğ»Ğ¸ Web)
   - Ğ¢ĞµĞºÑƒÑ‰ĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ
   - ĞŸĞ¾Ğ³Ğ¾Ğ´Ğ° (API)
   - Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸ (remember/recall)

2. **Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹:**
   - Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ
   - Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²
   - ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº

3. **ĞŸĞ°Ğ¼ÑÑ‚ÑŒ:**
   - ĞšÑ€Ğ°Ñ‚ĞºĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ (ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸)
   - Ğ”Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ (Ñ„Ğ°ĞºÑ‚Ñ‹ Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğµ)

4. **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³:**
   - Ğ›Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²ÑĞµÑ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹
   - Ğ¡Ğ±Ğ¾Ñ€ Ğ¼ĞµÑ‚Ñ€Ğ¸Ğº
   - ĞÑ‚Ñ‡Ñ‘Ñ‚ Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ

5. **Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ:**
   - CLI Ñ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¼ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¾Ğ¼
   - ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹: /help, /stats, /memory, /clear

**ĞšÑ€Ğ¸Ñ‚ĞµÑ€Ğ¸Ğ¸ Ğ¾Ñ†ĞµĞ½ĞºĞ¸:**
- Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ¾ÑĞ¿Ğ¾ÑĞ¾Ğ±Ğ½Ğ¾ÑÑ‚ÑŒ: 30%
- Ğ£ÑÑ‚Ğ¾Ğ¹Ñ‡Ğ¸Ğ²Ğ¾ÑÑ‚ÑŒ: 25%
- ĞŸĞ°Ğ¼ÑÑ‚ÑŒ: 20%
- ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³: 15%
- ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ĞºĞ¾Ğ´Ğ°: 10%

## Ğ—Ğ°ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ÑƒÑ€Ğ¾ĞºĞ°

### Ğ§Ñ‚Ğ¾ Ğ¼Ñ‹ Ğ¸Ğ·ÑƒÑ‡Ğ¸Ğ»Ğ¸

- **Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹**: Ğ¾Ñ‚ Ğ·Ğ°Ñ†Ğ¸ĞºĞ»Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ, Ğ½ĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ñ… Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ², Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº
- **ĞŸĞ°Ğ¼ÑÑ‚ÑŒ**: ĞºÑ€Ğ°Ñ‚ĞºĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ¸ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ, Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ñ‹ remember/recall
- **ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³**: Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ, Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸, Ğ¾Ñ‚Ñ‡Ñ‘Ñ‚Ñ‹
- **ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹**: ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ°Ğ³ĞµĞ½Ñ‚Ñ‹, Ğ¿Ğ°Ğ¹Ğ¿Ğ»Ğ°Ğ¹Ğ½Ñ‹

### Ğ¡Ğ²ÑĞ·ÑŒ Ñ Ğ´Ñ€ÑƒĞ³Ğ¸Ğ¼Ğ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑĞ¼Ğ¸

| ĞœĞ¾Ğ´ÑƒĞ»ÑŒ | ĞšĞ°Ğº ÑĞ²ÑĞ·Ğ°Ğ½ Ñ Ğ°Ğ³ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸ |
|--------|----------------------|
| ĞœĞ¾Ğ´ÑƒĞ»ÑŒ 2 (ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ‹) | Chain-of-Thought Ğ² THOUGHT ÑˆĞ°Ğ³Ğ°Ñ… |
| ĞœĞ¾Ğ´ÑƒĞ»ÑŒ 3 (SchoolBot) | ĞœĞ¾Ğ¶Ğ½Ğ¾ Ğ¿Ñ€ĞµĞ²Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ² Ğ°Ğ³ĞµĞ½Ñ‚Ğ° |
| ĞœĞ¾Ğ´ÑƒĞ»ÑŒ 4 (RAG) | RAG ĞºĞ°Ğº Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚ Ğ°Ğ³ĞµĞ½Ñ‚Ğ° |
| ĞœĞ¾Ğ´ÑƒĞ»ÑŒ 6 (Ğ¤Ğ¸Ğ½Ğ°Ğ») | ĞĞ³ĞµĞ½Ñ‚ ĞºĞ°Ğº Ğ¾ÑĞ½Ğ¾Ğ²Ğ° Ñ„Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° |

### Ğ’Ğ°Ñˆ Ğ¿Ñ€Ğ¾Ğ³Ñ€ĞµÑÑ

ğŸ‰ **ĞŸĞ¾Ğ·Ğ´Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼!** Ğ’Ñ‹ Ğ·Ğ°Ğ²ĞµÑ€ÑˆĞ¸Ğ»Ğ¸ ĞœĞ¾Ğ´ÑƒĞ»ÑŒ 5 Ğ¸ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ ÑƒĞ¼ĞµĞµÑ‚Ğµ:

- âœ… Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ LLM-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¾Ğ² Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸
- âœ… Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ ReAct Ñ†Ğ¸ĞºĞ»
- âœ… Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑ‚ÑŒ Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ½Ñ‹Ğµ Ğ¼ĞµÑ…Ğ°Ğ½Ğ¸Ğ·Ğ¼Ñ‹
- âœ… Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ´Ğ¾Ğ»Ğ³Ğ¾ÑÑ€Ğ¾Ñ‡Ğ½ÑƒÑ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ
- âœ… ĞĞ°ÑÑ‚Ñ€Ğ°Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³

**Ğ¡Ğ»ĞµĞ´ÑƒÑÑ‰Ğ¸Ğ¹ ÑˆĞ°Ğ³:** ĞœĞ¾Ğ´ÑƒĞ»ÑŒ 6 â€” Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚, Ğ³Ğ´Ğµ Ğ²Ñ‹ Ğ¾Ğ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚Ğµ Ğ²ÑĞµ Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ Ğ² Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ñ†ĞµĞ½Ğ½Ğ¾Ğµ AI-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ!

---

## Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹

### Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ:
- [LangChain Memory](https://python.langchain.com/docs/modules/memory/)
- [LangSmith (Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³)](https://docs.smith.langchain.com/)

### Ğ¤Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€ĞºĞ¸:
- [CrewAI](https://github.com/joaomdmoura/crewAI) â€” Ğ¼ÑƒĞ»ÑŒÑ‚Ğ¸Ğ°Ğ³ĞµĞ½Ñ‚Ğ½Ñ‹Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
- [AutoGen](https://github.com/microsoft/autogen) â€” Ğ¾Ñ‚ Microsoft
- [Langroid](https://github.com/langroid/langroid) â€” multi-agent programming

### Ğ¡Ñ‚Ğ°Ñ‚ÑŒĞ¸:
- [Building Reliable LLM Applications](https://www.anthropic.com/)
- [Production LLM Systems](https://www.latent.space/)

