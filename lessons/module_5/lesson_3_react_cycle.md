# –£—Ä–æ–∫ 3: –ê–≥–µ–Ω—Ç–Ω—ã–π —Ü–∏–∫–ª ReAct

## –í–≤–µ–¥–µ–Ω–∏–µ

–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º —É—Ä–æ–∫–µ –º—ã –Ω–∞—É—á–∏–ª–∏—Å—å –ø–æ–¥–∫–ª—é—á–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫ LLM. –ê–≥–µ–Ω—Ç –º–æ–≥ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞ —Ä–∞–∑. –ù–æ —á—Ç–æ –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ —Ç—Ä–µ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —à–∞–≥–æ–≤?

**ReAct** (Reasoning + Acting) ‚Äî —ç—Ç–æ –ø–∞—Ç—Ç–µ—Ä–Ω, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏—è –≤ –µ–¥–∏–Ω—ã–π —Ü–∏–∫–ª. –ê–≥–µ–Ω—Ç –¥—É–º–∞–µ—Ç, –¥–µ–π—Å—Ç–≤—É–µ—Ç, –Ω–∞–±–ª—é–¥–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç, –ø–æ–∫–∞ –Ω–µ —Ä–µ—à–∏—Ç –∑–∞–¥–∞—á—É.

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã —Ä–µ–∞–ª–∏–∑—É–µ–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π ReAct-–∞–≥–µ–Ω—Ç –∏ —Å–æ–∑–¥–∞–¥–∏–º **Research Agent** –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á.

## –¶–µ–ª–∏ —É—Ä–æ–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É—Ä–æ–∫–∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ:

- ‚úÖ –ü–æ–Ω–∏–º–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω ReAct (Reasoning + Acting)
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ü–∏–∫–ª THOUGHT ‚Üí ACTION ‚Üí OBSERVATION
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –∞–≥–µ–Ω—Ç–∞, —Ä–µ—à–∞—é—â–µ–≥–æ –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
- ‚úÖ –û—Ç–ª–∞–∂–∏–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

## –ö–ª—é—á–µ–≤—ã–µ —Ç–µ—Ä–º–∏–Ω—ã

- **ReAct** ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π
- **THOUGHT** ‚Äî —à–∞–≥ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
- **ACTION** ‚Äî –≤—ã–±–æ—Ä –∏ –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
- **OBSERVATION** ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–π—Å—Ç–≤–∏—è
- **–ê–≥–µ–Ω—Ç–Ω—ã–π —Ü–∏–∫–ª** ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∞–≥–æ–≤ –¥–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Ü–µ–ª–∏

## 1. –ü–∞—Ç—Ç–µ—Ä–Ω ReAct

### –ò–¥–µ—è ReAct

ReAct –±—ã–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω –≤ —Å—Ç–∞—Ç—å–µ ["ReAct: Synergizing Reasoning and Acting in Language Models"](https://arxiv.org/abs/2210.03629). –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è:

> –û–±—ä–µ–¥–∏–Ω–∏—Ç—å **—Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ** (Reasoning) –∏ **–¥–µ–π—Å—Ç–≤–∏–µ** (Acting) –≤ —á–µ—Ä–µ–¥—É—é—â–∏–π—Å—è —Ü–∏–∫–ª, –≥–¥–µ –∫–∞–∂–¥—ã–π —à–∞–≥ –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π.

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                         ReAct –¶–ò–ö–õ                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                ‚îÇ
‚îÇ  THOUGHT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ ACTION ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂ OBSERVATION                   ‚îÇ
‚îÇ     ‚îÇ                              ‚îÇ                           ‚îÇ
‚îÇ     ‚îÇ                              ‚îÇ                           ‚îÇ
‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                           ‚îÇ
‚îÇ              (–ø–æ–≤—Ç–æ—Ä—è—Ç—å –¥–æ ANSWER)                             ‚îÇ
‚îÇ                                                                ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –§–æ—Ä–º–∞—Ç ReAct

```
THOUGHT: –ß—Ç–æ –º–Ω–µ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ?
         (—Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ –æ –∑–∞–¥–∞—á–µ –∏ —Å–ª–µ–¥—É—é—â–µ–º –¥–µ–π—Å—Ç–≤–∏–∏)

ACTION: tool_name(arguments)
        (–≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Å –∞—Ä–≥—É–º–µ–Ω—Ç–∞–º–∏)

OBSERVATION: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–µ–π—Å—Ç–≤–∏—è
             (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π, –Ω–µ –∞–≥–µ–Ω—Ç–æ–º)

... –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è ...

ANSWER: –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –∑–∞–¥–∞—á—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã ReAct

**–ó–∞–¥–∞—á–∞:** "–ö—Ç–æ —Å—Ç–∞—Ä—à–µ: –ò–ª–æ–Ω –ú–∞—Å–∫ –∏–ª–∏ –ú–∞—Ä–∫ –¶—É–∫–µ—Ä–±–µ—Ä–≥, –∏ –Ω–∞ —Å–∫–æ–ª—å–∫–æ –ª–µ—Ç?"

```
THOUGHT: –ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, –∫—Ç–æ —Å—Ç–∞—Ä—à–µ, –º–Ω–µ –Ω—É–∂–Ω—ã –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è –æ–±–æ–∏—Ö.
         –ù–∞—á–Ω—É —Å –ò–ª–æ–Ω–∞ –ú–∞—Å–∫–∞.

ACTION: wikipedia("–ò–ª–æ–Ω –ú–∞—Å–∫")

OBSERVATION: –ò–ª–æ–Ω –†–∏–≤ –ú–∞—Å–∫ ‚Äî –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å, 
             –∏–Ω–∂–µ–Ω–µ—Ä –∏ –º–∏–ª–ª–∏–∞—Ä–¥–µ—Ä. –†–æ–¥–∏–ª—Å—è 28 –∏—é–Ω—è 1971 –≥–æ–¥–∞ 
             –≤ –ü—Ä–µ—Ç–æ—Ä–∏–∏, –Æ–ê–†.

THOUGHT: –û—Ç–ª–∏—á–Ω–æ, –ú–∞—Å–∫ —Ä–æ–¥–∏–ª—Å—è 28 –∏—é–Ω—è 1971 –≥–æ–¥–∞. 
         –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è –¶—É–∫–µ—Ä–±–µ—Ä–≥–∞.

ACTION: wikipedia("–ú–∞—Ä–∫ –¶—É–∫–µ—Ä–±–µ—Ä–≥")

OBSERVATION: –ú–∞—Ä–∫ –≠–ª–ª–∏–æ—Ç –¶—É–∫–µ—Ä–±–µ—Ä–≥ ‚Äî –∞–º–µ—Ä–∏–∫–∞–Ω—Å–∫–∏–π –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å, 
             –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—å Facebook. –†–æ–¥–∏–ª—Å—è 14 –º–∞—è 1984 –≥–æ–¥–∞ 
             –≤ –£–∞–π—Ç-–ü–ª–µ–π–Ω—Å, –ù—å—é-–ô–æ—Ä–∫.

THOUGHT: –¶—É–∫–µ—Ä–±–µ—Ä–≥ —Ä–æ–¥–∏–ª—Å—è 14 –º–∞—è 1984 –≥–æ–¥–∞.
         –¢–µ–ø–µ—Ä—å –≤—ã—á–∏—Å–ª—é —Ä–∞–∑–Ω–∏—Ü—É: 1984 - 1971 = 13 –ª–µ—Ç.
         –ú–∞—Å–∫ —Å—Ç–∞—Ä—à–µ.

ACTION: calculator("1984 - 1971")

OBSERVATION: 13

THOUGHT: –Ø –ø–æ–ª—É—á–∏–ª –≤—Å–µ –¥–∞–Ω–Ω—ã–µ. –ò–ª–æ–Ω –ú–∞—Å–∫ (1971) —Å—Ç–∞—Ä—à–µ 
         –ú–∞—Ä–∫–∞ –¶—É–∫–µ—Ä–±–µ—Ä–≥–∞ (1984) –Ω–∞ 13 –ª–µ—Ç.

ANSWER: –ò–ª–æ–Ω –ú–∞—Å–∫ —Å—Ç–∞—Ä—à–µ –ú–∞—Ä–∫–∞ –¶—É–∫–µ—Ä–±–µ—Ä–≥–∞ –Ω–∞ 13 –ª–µ—Ç.
        –ú–∞—Å–∫ —Ä–æ–¥–∏–ª—Å—è 28 –∏—é–Ω—è 1971 –≥–æ–¥–∞, –∞ –¶—É–∫–µ—Ä–±–µ—Ä–≥ ‚Äî 
        14 –º–∞—è 1984 –≥–æ–¥–∞.
```

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ReAct

| –ê—Å–ø–µ–∫—Ç | –ë–µ–∑ ReAct | –° ReAct |
|--------|-----------|---------|
| –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å | –ß—ë—Ä–Ω—ã–π —è—â–∏–∫ | –í–∏–¥–Ω—ã —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è |
| –û—Ç–ª–∞–¥–∫–∞ | –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –æ—à–∏–±–∫—É | –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —à–∞–≥ |
| –¢–æ—á–Ω–æ—Å—Ç—å | –ú–æ–∂–µ—Ç –≤—ã–¥—É–º–∞—Ç—å | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã |
| –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ | –û–≥—Ä–∞–Ω–∏—á–µ–Ω | –†–µ—à–∞–µ—Ç –ø–æ—à–∞–≥–æ–≤–æ |

## 2. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è ReAct-–∞–≥–µ–Ω—Ç–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```python
"""
–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ReAct-–∞–≥–µ–Ω—Ç–∞.
"""

class ReActAgent:
    """
    –ê–≥–µ–Ω—Ç —Å —Ü–∏–∫–ª–æ–º ReAct.
    
    –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
    - ToolKit: –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
    - System Prompt: –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É ReAct
    - –¶–∏–∫–ª: THOUGHT ‚Üí ACTION ‚Üí OBSERVATION ‚Üí ... ‚Üí ANSWER
    """
    
    def __init__(self, toolkit, llm_model, max_iterations):
        self.toolkit = toolkit           # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
        self.llm_model = llm_model       # –ú–æ–¥–µ–ª—å LLM
        self.max_iterations = max_iterations  # –õ–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π
    
    def run(self, task):
        """
        –ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥: –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ ReAct.
        
        1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–Ω—ã–º –ø—Ä–æ–º–ø—Ç–æ–º
        2. –¶–∏–∫–ª –¥–æ ANSWER –∏–ª–∏ –ª–∏–º–∏—Ç–∞ –∏—Ç–µ—Ä–∞—Ü–∏–π
        3. –ü–∞—Ä—Å–∏–Ω–≥ ACTION –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
        4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ OBSERVATION
        5. –í–æ–∑–≤—Ä–∞—Ç —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
        """
        pass
```

### –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

```python
"""
ReAct-–∞–≥–µ–Ω—Ç: –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è.
"""

import os
import re
import json
import requests
from typing import Dict, List, Optional
from dataclasses import dataclass
from dotenv import load_dotenv

load_dotenv()


class ReActAgent:
    """
    –ê–≥–µ–Ω—Ç —Å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º ReAct (Reasoning + Acting).
    
    –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–≥–æ—à–∞–≥–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞—á —á–µ—Ä–µ–∑ —Ü–∏–∫–ª:
    THOUGHT ‚Üí ACTION ‚Üí OBSERVATION ‚Üí ... ‚Üí ANSWER
    """
    
    # –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –¥–ª—è ReAct
    SYSTEM_PROMPT_TEMPLATE = """–¢—ã ‚Äî —É–º–Ω—ã–π –∞–≥–µ–Ω—Ç, —Ä–µ—à–∞—é—â–∏–π –∑–∞–¥–∞—á–∏ —á–µ—Ä–µ–∑ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ –∏ –¥–µ–π—Å—Ç–≤–∏—è.

## –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞

–¢—ã –î–û–õ–ñ–ï–ù —Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É:

THOUGHT: (—Ç–≤–æ–∏ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –æ —Ç–æ–º, —á—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ)
ACTION: tool_name("argument")
[–ñ–¥–∏ OBSERVATION –æ—Ç —Å–∏—Å—Ç–µ–º—ã]

–ü–æ–≤—Ç–æ—Ä—è–π —Ü–∏–∫–ª THOUGHT ‚Üí ACTION, –ø–æ–∫–∞ –Ω–µ —Å–º–æ–∂–µ—à—å –¥–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.

–ö–æ–≥–¥–∞ –≥–æ—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∏—Ç—å:
THOUGHT: (—Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è)
ANSWER: (–ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

## –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

{tools_description}

## –ü—Ä–∞–≤–∏–ª–∞

1. –í–°–ï–ì–î–ê –Ω–∞—á–∏–Ω–∞–π —Å THOUGHT (—á—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å)
2. –ü–æ—Å–ª–µ THOUGHT –ø–∏—à–∏ ACTION —Å –≤—ã–∑–æ–≤–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
3. –ù–ï –≤—ã–¥—É–º—ã–≤–∞–π OBSERVATION ‚Äî —ç—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞
4. –ò—Å–ø–æ–ª—å–∑—É–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ–∞–∫—Ç–æ–≤
5. –ï—Å–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É, –ø–æ–ø—Ä–æ–±—É–π –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥
6. –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

## –ü—Ä–∏–º–µ—Ä—ã

–ü—Ä–∏–º–µ—Ä 1:
User: –°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 15% –æ—Ç 200?

THOUGHT: –ù—É–∂–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å 15% –æ—Ç 200. –≠—Ç–æ —Ä–∞–≤–Ω–æ 200 * 0.15.
ACTION: calculator("200 * 0.15")

OBSERVATION: 30.0

THOUGHT: –ü–æ–ª—É—á–∏–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç. 15% –æ—Ç 200 —Ä–∞–≤–Ω–æ 30.
ANSWER: 15% –æ—Ç 200 —Ä–∞–≤–Ω–æ 30.

–ü—Ä–∏–º–µ—Ä 2:
User: –ö—Ç–æ –Ω–∞–ø–∏—Å–∞–ª "–í–æ–π–Ω—É –∏ –º–∏—Ä"?

THOUGHT: –ù—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∞–≤—Ç–æ—Ä–∞ —Ä–æ–º–∞–Ω–∞ "–í–æ–π–Ω–∞ –∏ –º–∏—Ä".
ACTION: wikipedia("–í–æ–π–Ω–∞ –∏ –º–∏—Ä —Ä–æ–º–∞–Ω")

OBSERVATION: ¬´–í–æ–π–Ω–∞ –∏ –º–∏—Ä¬ª ‚Äî —Ä–æ–º–∞–Ω-—ç–ø–æ–ø–µ—è –õ—å–≤–∞ –ù–∏–∫–æ–ª–∞–µ–≤–∏—á–∞ –¢–æ–ª—Å—Ç–æ–≥–æ...

THOUGHT: –ù–∞—à—ë–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ê–≤—Ç–æ—Ä ‚Äî –õ–µ–≤ –¢–æ–ª—Å—Ç–æ–π.
ANSWER: –†–æ–º–∞–Ω "–í–æ–π–Ω–∞ –∏ –º–∏—Ä" –Ω–∞–ø–∏—Å–∞–ª –õ–µ–≤ –ù–∏–∫–æ–ª–∞–µ–≤–∏—á –¢–æ–ª—Å—Ç–æ–π.
"""
    
    def __init__(
        self,
        toolkit: 'ToolKit',
        model: str = "openai/gpt-4-turbo-preview",
        max_iterations: int = 10,
        verbose: bool = True
    ):
        """
        –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ReAct-–∞–≥–µ–Ω—Ç–∞.
        
        Args:
            toolkit: –ù–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
            model: –ú–æ–¥–µ–ª—å LLM
            max_iterations: –ú–∞–∫—Å–∏–º—É–º –∏—Ç–µ—Ä–∞—Ü–∏–π —Ü–∏–∫–ª–∞
            verbose: –í—ã–≤–æ–¥–∏—Ç—å –ª–æ–≥–∏ —Ä–∞–±–æ—Ç—ã
        """
        self.toolkit = toolkit
        self.model = model
        self.max_iterations = max_iterations
        self.verbose = verbose
        self.api_key = os.getenv("OPENROUTER_API_KEY")
        
        if not self.api_key:
            raise ValueError("–ù–µ –Ω–∞–π–¥–µ–Ω OPENROUTER_API_KEY")
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
        self.system_prompt = self.SYSTEM_PROMPT_TEMPLATE.format(
            tools_description=self._format_tools_description()
        )
    
    def _format_tools_description(self) -> str:
        """–§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞"""
        descriptions = []
        for tool in self.toolkit.tools.values():
            params = ", ".join(f'"{k}"' for k in tool.parameters.keys())
            descriptions.append(f"‚Ä¢ {tool.name}({params}): {tool.description}")
        return "\n".join(descriptions)
    
    def _call_llm(self, messages: List[Dict]) -> str:
        """–í—ã–∑—ã–≤–∞–µ—Ç LLM –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞"""
        response = requests.post(
            "https://openrouter.ai/api/v1/chat/completions",
            headers={
                "Authorization": f"Bearer {self.api_key}",
                "Content-Type": "application/json"
            },
            json={
                "model": self.model,
                "messages": messages,
                "temperature": 0.7,
                "max_tokens": 1000
            },
            timeout=60
        )
        
        if response.status_code != 200:
            raise Exception(f"API Error: {response.status_code}")
        
        return response.json()["choices"][0]["message"]["content"]
    
    def _parse_action(self, response: str) -> Optional[Dict]:
        """
        –ò–∑–≤–ª–µ–∫–∞–µ—Ç ACTION –∏–∑ –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞.
        
        Returns:
            {"tool": str, "args": str} –∏–ª–∏ None
        """
        # –ò—â–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω ACTION: tool_name("argument")
        action_pattern = r'ACTION:\s*(\w+)\s*\(\s*["\']?([^"\']*)["\']?\s*\)'
        match = re.search(action_pattern, response)
        
        if match:
            return {
                "tool": match.group(1),
                "args": match.group(2)
            }
        
        # –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω: ACTION: tool_name(argument)
        action_pattern2 = r'ACTION:\s*(\w+)\s*\(\s*(.+?)\s*\)'
        match2 = re.search(action_pattern2, response)
        
        if match2:
            args = match2.group(2).strip('"\'')
            return {
                "tool": match2.group(1),
                "args": args
            }
        
        return None
    
    def _extract_answer(self, response: str) -> Optional[str]:
        """–ò–∑–≤–ª–µ–∫–∞–µ—Ç ANSWER –∏–∑ –æ—Ç–≤–µ—Ç–∞ –∞–≥–µ–Ω—Ç–∞"""
        if "ANSWER:" in response:
            answer = response.split("ANSWER:")[-1].strip()
            return answer
        return None
    
    def _log(self, message: str, prefix: str = ""):
        """–í—ã–≤–æ–¥–∏—Ç –ª–æ–≥, –µ—Å–ª–∏ verbose=True"""
        if self.verbose:
            print(f"{prefix}{message}")
    
    def run(self, task: str) -> Dict:
        """
        –í—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ ReAct —Ü–∏–∫–ª.
        
        Args:
            task: –ó–∞–¥–∞—á–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            
        Returns:
            {
                "answer": str,          # –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
                "iterations": int,       # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π
                "actions": List[Dict],   # –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
                "success": bool          # –£—Å–ø–µ—à–Ω–æ –ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
            }
        """
        self._log(f"\n{'='*70}")
        self._log(f"üéØ –ó–ê–î–ê–ß–ê: {task}")
        self._log(f"{'='*70}\n")
        
        # –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
        messages = [
            {"role": "system", "content": self.system_prompt},
            {"role": "user", "content": task}
        ]
        
        # –¢—Ä–µ–∫–∏–Ω–≥ –¥–µ–π—Å—Ç–≤–∏–π
        actions_log = []
        iteration = 0
        
        while iteration < self.max_iterations:
            iteration += 1
            self._log(f"\n--- –ò—Ç–µ—Ä–∞—Ü–∏—è {iteration} ---\n")
            
            # –ó–∞–ø—Ä–æ—Å –∫ LLM
            response = self._call_llm(messages)
            self._log(f"ü§ñ –ê–≥–µ–Ω—Ç:\n{response}\n")
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
            answer = self._extract_answer(response)
            if answer:
                self._log(f"\n{'='*70}")
                self._log(f"‚úÖ –û–¢–í–ï–¢: {answer}")
                self._log(f"{'='*70}")
                
                return {
                    "answer": answer,
                    "iterations": iteration,
                    "actions": actions_log,
                    "success": True
                }
            
            # –ü–∞—Ä—Å–∏–º ACTION
            action = self._parse_action(response)
            
            if action:
                tool_name = action["tool"]
                tool_args = action["args"]
                
                self._log(f"üîß –î–µ–π—Å—Ç–≤–∏–µ: {tool_name}(\"{tool_args}\")")
                
                # –í—ã–ø–æ–ª–Ω—è–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
                try:
                    if tool_name not in self.toolkit.tools:
                        observation = f"–û—à–∏–±–∫–∞: –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç '{tool_name}' –Ω–µ –Ω–∞–π–¥–µ–Ω. –î–æ—Å—Ç—É–ø–Ω—ã: {self.toolkit.list_tools()}"
                    else:
                        # –ü–µ—Ä–µ–¥–∞—ë–º –∞—Ä–≥—É–º–µ–Ω—Ç –≤ –ø–µ—Ä–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
                        first_param = list(self.toolkit.tools[tool_name].parameters.keys())[0]
                        observation = self.toolkit.execute(tool_name, **{first_param: tool_args})
                    
                    self._log(f"üëÅÔ∏è –ù–∞–±–ª—é–¥–µ–Ω–∏–µ: {observation[:200]}{'...' if len(observation) > 200 else ''}")
                    
                    actions_log.append({
                        "iteration": iteration,
                        "tool": tool_name,
                        "args": tool_args,
                        "result": observation[:500]
                    })
                    
                except Exception as e:
                    observation = f"–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: {str(e)}"
                    self._log(f"‚ùå {observation}")
                
                # –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞ –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
                messages.append({"role": "assistant", "content": response})
                messages.append({"role": "user", "content": f"OBSERVATION: {observation}"})
            
            else:
                # –ù–µ—Ç ACTION ‚Äî –ø—Ä–æ—Å–∏–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                self._log("‚ö†Ô∏è ACTION –Ω–µ –Ω–∞–π–¥–µ–Ω, –ø—Ä–æ—Å–∏–º –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å...")
                messages.append({"role": "assistant", "content": response})
                messages.append({
                    "role": "user", 
                    "content": "–ü—Ä–æ–¥–æ–ª–∂–∞–π. –£–∫–∞–∂–∏ ACTION —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –∏–ª–∏ ANSWER —Å —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º."
                })
        
        # –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π
        self._log(f"\n‚ùå –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏–π ({self.max_iterations})")
        
        return {
            "answer": "–ù–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏ –æ—Ç–≤–µ—Ç –∑–∞ –æ—Ç–≤–µ–¥—ë–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —à–∞–≥–æ–≤.",
            "iterations": iteration,
            "actions": actions_log,
            "success": False
        }
    
    def run_batch(self, tasks: List[str]) -> List[Dict]:
        """
        –í—ã–ø–æ–ª–Ω—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.
        """
        results = []
        for i, task in enumerate(tasks):
            self._log(f"\n{'#'*70}")
            self._log(f"# –ó–ê–î–ê–ß–ê {i+1}/{len(tasks)}")
            self._log(f"{'#'*70}")
            
            result = self.run(task)
            results.append(result)
        
        return results
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

```python
"""
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ReAct-–∞–≥–µ–Ω—Ç–∞.
"""

def demo_react_agent():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã ReAct-–∞–≥–µ–Ω—Ç–∞"""
    
    # –°–æ–∑–¥–∞—ë–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
    toolkit = ToolKit()
    toolkit.register(calculator_tool)
    toolkit.register(wikipedia_tool)
    toolkit.register(datetime_tool)
    
    # –°–æ–∑–¥–∞—ë–º –∞–≥–µ–Ω—Ç–∞
    agent = ReActAgent(
        toolkit=toolkit,
        model="openai/gpt-4-turbo-preview",
        max_iterations=5,
        verbose=True
    )
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
    tasks = [
        "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 23 * 17 + 156?",
        "–ö—Ç–æ —Ç–∞–∫–æ–π –ê–ª—å–±–µ—Ä—Ç –≠–π–Ω—à—Ç–µ–π–Ω –∏ –≤ –∫–∞–∫–æ–º –≥–æ–¥—É –æ–Ω —Ä–æ–¥–∏–ª—Å—è?",
        "–ö—Ç–æ —Å—Ç–∞—Ä—à–µ: –ò–ª–æ–Ω –ú–∞—Å–∫ –∏–ª–∏ –î–∂–µ—Ñ—Ñ –ë–µ–∑–æ—Å?",
    ]
    
    for task in tasks:
        result = agent.run(task)
        print(f"\nüìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:")
        print(f"   –ò—Ç–µ—Ä–∞—Ü–∏–π: {result['iterations']}")
        print(f"   –î–µ–π—Å—Ç–≤–∏–π: {len(result['actions'])}")
        print(f"   –£—Å–ø–µ—Ö: {'‚úÖ' if result['success'] else '‚ùå'}")
        print()


if __name__ == "__main__":
    demo_react_agent()
```

## 3. Research Agent

### –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π

```python
"""
Research Agent: –∞–≥–µ–Ω—Ç –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–¥–∞—á.
"""


class ResearchAgent(ReActAgent):
    """
    –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π.
    
    –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
    - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç
    - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
    - –§–∞–∫—Ç-—á–µ–∫–∏–Ω–≥
    """
    
    RESEARCH_SYSTEM_PROMPT = """–¢—ã ‚Äî Research Agent, —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –Ω–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è—Ö.

## –¢–≤–æ—è –∑–∞–¥–∞—á–∞

–ü—Ä–æ–≤–æ–¥–∏—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è: —Å–æ–±–∏—Ä–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, 
–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞—Ç—å –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç.

## –§–æ—Ä–º–∞—Ç —Ä–∞–±–æ—Ç—ã

THOUGHT: (—á—Ç–æ –Ω—É–∂–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å)
ACTION: tool_name("query")

–ü–æ–≤—Ç–æ—Ä—è–π, –ø–æ–∫–∞ –Ω–µ —Å–æ–±–µ—Ä—ë—à—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

THOUGHT: (–∞–Ω–∞–ª–∏–∑ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
ANSWER: 
## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

### –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç
(1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)

### –î–µ—Ç–∞–ª–∏
(–ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏
(–∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –±—ã–ª–∏ —Å–¥–µ–ª–∞–Ω—ã)

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

{tools_description}

## –ü—Ä–∞–≤–∏–ª–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

1. –ü—Ä–æ–≤–µ—Ä—è–π —Ñ–∞–∫—Ç—ã –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
2. –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–∞ ‚Äî —É–∫–∞–∂–∏ —ç—Ç–æ
3. –ù–µ –≤—ã–¥—É–º—ã–≤–∞–π –¥–∞–Ω–Ω—ã–µ
4. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π –æ—Ç–≤–µ—Ç
5. –£–∫–∞–∑—ã–≤–∞–π, —á—Ç–æ –Ω–µ —É–¥–∞–ª–æ—Å—å –Ω–∞–π—Ç–∏
"""
    
    def __init__(self, toolkit: 'ToolKit', **kwargs):
        super().__init__(toolkit, **kwargs)
        self.system_prompt = self.RESEARCH_SYSTEM_PROMPT.format(
            tools_description=self._format_tools_description()
        )
    
    def research(self, topic: str) -> Dict:
        """
        –ü—Ä–æ–≤–æ–¥–∏—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –ø–æ —Ç–µ–º–µ.
        
        Args:
            topic: –¢–µ–º–∞ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
            
        Returns:
            –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
        """
        research_task = f"–ü—Ä–æ–≤–µ–¥–∏ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ç–µ–º—É: {topic}"
        return self.run(research_task)


def demo_research_agent():
    """–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è Research Agent"""
    
    # –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
    toolkit = ToolKit()
    toolkit.register(wikipedia_tool)
    toolkit.register(calculator_tool)
    toolkit.register(datetime_tool)
    
    agent = ResearchAgent(
        toolkit=toolkit,
        max_iterations=8,
        verbose=True
    )
    
    # –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∑–∞–¥–∞—á–∏
    topics = [
        "–°—Ä–∞–≤–Ω–∏ Python –∏ JavaScript: –∫–∞–∫–æ–π —è–∑—ã–∫ –ø–æ–ø—É–ª—è—Ä–Ω–µ–µ –∏ –¥–ª—è —á–µ–≥–æ –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç?",
        "–ö–æ–≥–¥–∞ –±—ã–ª–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –∫–æ–º–ø–∞–Ω–∏—è OpenAI –∏ –∫—Ç–æ –µ—ë –æ—Å–Ω–æ–≤–∞—Ç–µ–ª–∏?",
    ]
    
    for topic in topics:
        result = agent.research(topic)
        print(f"\nüìã –ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ")
        print(f"   –ò—Ç–µ—Ä–∞—Ü–∏–π: {result['iterations']}")
        print(f"   –£—Å–ø–µ—Ö: {'‚úÖ' if result['success'] else '‚ùå'}")
```

### –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã Research Agent

```
üéØ –ó–ê–î–ê–ß–ê: –°—Ä–∞–≤–Ω–∏ Python –∏ JavaScript: –∫–∞–∫–æ–π —è–∑—ã–∫ –ø–æ–ø—É–ª—è—Ä–Ω–µ–µ?

--- –ò—Ç–µ—Ä–∞—Ü–∏—è 1 ---

ü§ñ –ê–≥–µ–Ω—Ç:
THOUGHT: –î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç–∏ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
–ù–∞—á–Ω—É —Å –ø–æ–∏—Å–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ Python.

ACTION: wikipedia("Python programming language")

üëÅÔ∏è –ù–∞–±–ª—é–¥–µ–Ω–∏–µ: Python ‚Äî –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è...
–û–¥–∏–Ω –∏–∑ —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –≤ –º–∏—Ä–µ...

--- –ò—Ç–µ—Ä–∞—Ü–∏—è 2 ---

ü§ñ –ê–≥–µ–Ω—Ç:
THOUGHT: –ù–∞—à—ë–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ Python. –¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø—Ä–æ JavaScript.

ACTION: wikipedia("JavaScript programming")

üëÅÔ∏è –ù–∞–±–ª—é–¥–µ–Ω–∏–µ: JavaScript ‚Äî –º—É–ª—å—Ç–∏–ø–∞—Ä–∞–¥–∏–≥–º–µ–Ω–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è...
–û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏...

--- –ò—Ç–µ—Ä–∞—Ü–∏—è 3 ---

ü§ñ –ê–≥–µ–Ω—Ç:
THOUGHT: –°–æ–±—Ä–∞–ª –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –æ–±–æ–∏—Ö —è–∑—ã–∫–∞—Ö. –ú–æ–≥—É —Å—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç.

ANSWER: 
## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è

### –ö—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç
–û–±–∞ —è–∑—ã–∫–∞ –≤—Ö–æ–¥—è—Ç –≤ —Ç–æ–ø-3 —Å–∞–º—ã—Ö –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö. Python –ª–∏–¥–∏—Ä—É–µ—Ç –≤ Data Science 
–∏ ML, JavaScript ‚Äî –≤ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.

### –î–µ—Ç–∞–ª–∏
**Python:**
- –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —è–∑—ã–∫ –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- –õ–∏–¥–µ—Ä –≤ –º–∞—à–∏–Ω–Ω–æ–º –æ–±—É—á–µ–Ω–∏–∏, –∞–Ω–∞–ª–∏–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ—Å—Ç–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

**JavaScript:**
- –û—Å–Ω–æ–≤–Ω–æ–π —è–∑—ã–∫ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ, –∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ (Node.js)
- –°–∞–º—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —è–∑—ã–∫ –Ω–∞ GitHub

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏
- –ó–∞–ø—Ä–æ—Å: wikipedia("Python programming language")
- –ó–∞–ø—Ä–æ—Å: wikipedia("JavaScript programming")
```

## 4. –£–ª—É—á—à–µ–Ω–∏–µ –∞–≥–µ–Ω—Ç–∞

### –¢–µ—Ö–Ω–∏–∫–∏ —É–ª—É—á—à–µ–Ω–∏—è

#### 1. –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ –¥–µ–π—Å—Ç–≤–∏—è–º–∏

```python
class PlanningReActAgent(ReActAgent):
    """
    –ê–≥–µ–Ω—Ç —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º.
    –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–ª–∞–Ω, –ø–æ—Ç–æ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç.
    """
    
    PLANNING_PROMPT = """
–ü—Ä–µ–∂–¥–µ —á–µ–º –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å, —Å–æ–∑–¥–∞–π –ø–ª–∞–Ω –∏–∑ 3-5 —à–∞–≥–æ–≤.

–§–æ—Ä–º–∞—Ç:
PLAN:
1. [—à–∞–≥ 1]
2. [—à–∞–≥ 2]
...

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è–π –ø–ª–∞–Ω —á–µ—Ä–µ–∑ THOUGHT ‚Üí ACTION —Ü–∏–∫–ª.
"""
    
    def run(self, task: str) -> Dict:
        # –î–æ–±–∞–≤–ª—è–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –Ω–∞—á–∞–ª–æ
        enhanced_task = f"{self.PLANNING_PROMPT}\n\n–ó–∞–¥–∞—á–∞: {task}"
        return super().run(enhanced_task)
```

#### 2. –°–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```python
class SelfCheckingAgent(ReActAgent):
    """
    –ê–≥–µ–Ω—Ç —Å —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
    –ü–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–µ–±—è.
    """
    
    def _extract_answer(self, response: str) -> Optional[str]:
        """–î–æ–±–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ –≤–æ–∑–≤—Ä–∞—Ç–æ–º –æ—Ç–≤–µ—Ç–∞"""
        answer = super()._extract_answer(response)
        
        if answer:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Ç–≤–µ—Ç
            check_prompt = f"""
–ü—Ä–æ–≤–µ—Ä—å —Å–≤–æ–π –æ—Ç–≤–µ—Ç:
- –û–Ω –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å?
- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –∏–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (–Ω–µ –≤—ã–¥—É–º–∞–Ω—ã)?
- –†–∞—Å—á—ë—Ç—ã –≤–µ—Ä–Ω—ã?

–û—Ç–≤–µ—Ç: {answer}

–ï—Å–ª–∏ –≤—Å—ë –≤–µ—Ä–Ω–æ, –ø–æ–¥—Ç–≤–µ—Ä–¥–∏. –ï—Å–ª–∏ –µ—Å—Ç—å –æ—à–∏–±–∫–∏, –∏—Å–ø—Ä–∞–≤—å.
"""
            # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É
        
        return answer
```

#### 3. –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ JSON

```python
class JSONReActAgent(ReActAgent):
    """
    –ê–≥–µ–Ω—Ç —Å JSON-—Ñ–æ—Ä–º–∞—Ç–æ–º –¥–µ–π—Å—Ç–≤–∏–π.
    –ë–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥.
    """
    
    JSON_SYSTEM_PROMPT = """
–§–æ—Ä–º–∞—Ç ACTION:
ACTION: {"tool": "tool_name", "args": {"param": "value"}}

–ü—Ä–∏–º–µ—Ä:
ACTION: {"tool": "calculator", "args": {"expression": "2 + 2"}}
"""
    
    def _parse_action(self, response: str) -> Optional[Dict]:
        """–ü–∞—Ä—Å–∏—Ç JSON-—Ñ–æ—Ä–º–∞—Ç ACTION"""
        action_pattern = r'ACTION:\s*(\{.*?\})'
        match = re.search(action_pattern, response, re.DOTALL)
        
        if match:
            try:
                action_json = json.loads(match.group(1))
                return {
                    "tool": action_json["tool"],
                    "args": action_json.get("args", {})
                }
            except json.JSONDecodeError:
                pass
        
        # Fallback –∫ –±–∞–∑–æ–≤–æ–º—É –ø–∞—Ä—Å–∏–Ω–≥—É
        return super()._parse_action(response)
```

## 5. –û—Ç–ª–∞–¥–∫–∞ –∞–≥–µ–Ω—Ç–æ–≤

### –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

| –ü—Ä–æ–±–ª–µ–º–∞ | –°–∏–º–ø—Ç–æ–º—ã | –†–µ—à–µ–Ω–∏–µ |
|----------|----------|---------|
| –ó–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏–µ | –ü–æ–≤—Ç–æ—Ä—è–µ—Ç –æ–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –¥–µ–π—Å—Ç–≤–∏–π |
| –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç | ACTION –Ω–µ –ø–∞—Ä—Å–∏—Ç—Å—è | –£–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º–ø—Ç/–ø–∞—Ä—Å–µ—Ä |
| –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ | –í—ã–∑—ã–≤–∞–µ—Ç –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã | –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ |
| –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ | –ù–µ —É—Å–ø–µ–≤–∞–µ—Ç –∑–∞ max_iterations | –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç / —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∑–∞–¥–∞—á—É |

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏

```python
class DebuggableReActAgent(ReActAgent):
    """
    –ê–≥–µ–Ω—Ç —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –æ—Ç–ª–∞–¥–∫–æ–π.
    """
    
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.debug_log = []
    
    def run(self, task: str) -> Dict:
        """–î–æ–±–∞–≤–ª—è–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ"""
        self.debug_log = []  # –û—á–∏—â–∞–µ–º –ª–æ–≥
        
        result = super().run(task)
        
        # –î–æ–±–∞–≤–ª—è–µ–º debug-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
        result["debug"] = {
            "full_log": self.debug_log,
            "token_usage": self._estimate_tokens(),
            "tool_calls": self._summarize_tools()
        }
        
        return result
    
    def _estimate_tokens(self) -> int:
        """–û—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã"""
        # –ü—Ä–∏–º–µ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞: 1 —Ç–æ–∫–µ–Ω ‚âà 4 —Å–∏–º–≤–æ–ª–∞
        total_chars = sum(len(str(entry)) for entry in self.debug_log)
        return total_chars // 4
    
    def _summarize_tools(self) -> Dict:
        """–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤"""
        from collections import Counter
        tools_used = [
            entry.get("tool") 
            for entry in self.debug_log 
            if "tool" in entry
        ]
        return dict(Counter(tools_used))
    
    def get_trace(self) -> str:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —á–∏—Ç–∞–µ–º—ã–π trace –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è"""
        trace = []
        for i, entry in enumerate(self.debug_log):
            trace.append(f"[{i+1}] {entry.get('type', 'unknown')}: {entry.get('content', '')[:100]}")
        return "\n".join(trace)
```

## –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞–Ω–∏—è

### üü¢ –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å

**–ó–∞–¥–∞–Ω–∏–µ 1: –ó–∞–ø—É—Å–∫ ReAct-–∞–≥–µ–Ω—Ç–∞**

–ó–∞–ø—É—Å—Ç–∏—Ç–µ ReAct-–∞–≥–µ–Ω—Ç–∞ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á–∞—Ö –∏ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏:

```python
tasks = [
    "–°–∫–æ–ª—å–∫–æ –±—É–¥–µ—Ç 123 + 456 * 2?",
    "–ö—Ç–æ —Ç–∞–∫–æ–π –°—Ç–∏–≤ –î–∂–æ–±—Å?",
    "–ö–∞–∫–æ–π —Å–µ–π—á–∞—Å –≥–æ–¥?",
]
```

–í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
- –°–∫–æ–ª—å–∫–æ –∏—Ç–µ—Ä–∞—Ü–∏–π –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏?
- –ö–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å?
- –ë—ã–ª–∏ –ª–∏ –æ—à–∏–±–∫–∏?

**–ó–∞–¥–∞–Ω–∏–µ 2: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞**

–î–æ–±–∞–≤—å—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `random_fact` –≤ –Ω–∞–±–æ—Ä –∞–≥–µ–Ω—Ç–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –∑–∞–ø—Ä–æ—Å–µ "–†–∞—Å—Å–∫–∞–∂–∏ —Å–ª—É—á–∞–π–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Ñ–∞–∫—Ç".

### üü° –°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å

**–ó–∞–¥–∞–Ω–∏–µ 3: –°–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏**

–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∞–≥–µ–Ω—Ç–∞ –Ω–∞ –∑–∞–¥–∞—á–∞—Ö, —Ç—Ä–µ–±—É—é—â–∏—Ö 3+ —à–∞–≥–æ–≤:

```python
complex_tasks = [
    "–í—ã—á–∏—Å–ª–∏ –ø–ª–æ—â–∞–¥—å –∫—Ä—É–≥–∞ —Å —Ä–∞–¥–∏—É—Å–æ–º 7 –∏ —Å—Ä–∞–≤–Ω–∏ —Å –ø–ª–æ—â–∞–¥—å—é –∫–≤–∞–¥—Ä–∞—Ç–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω–æ–π 12",
    "–ù–∞–π–¥–∏ –≥–æ–¥ —Ä–æ–∂–¥–µ–Ω–∏—è –ê–ª—å–±–µ—Ä—Ç–∞ –≠–π–Ω—à—Ç–µ–π–Ω–∞ –∏ –ø–æ—Å—á–∏—Ç–∞–π, —Å–∫–æ–ª—å–∫–æ –ª–µ—Ç –ø—Ä–æ—à–ª–æ —Å —Ç–µ—Ö –ø–æ—Ä",
]
```

**–ó–∞–¥–∞–Ω–∏–µ 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

–°–æ–∑–¥–∞–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–æ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É, –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –∫–∞–∫ –∞–≥–µ–Ω—Ç –µ—ë –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç.

### üî¥ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —É—Ä–æ–≤–µ–Ω—å

**–ó–∞–¥–∞–Ω–∏–µ 5: –ê–≥–µ–Ω—Ç —Å –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–º**

–†–µ–∞–ª–∏–∑—É–π—Ç–µ `PlanningReActAgent`, –∫–æ—Ç–æ—Ä—ã–π:
1. –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—ë—Ç –ø–ª–∞–Ω –∏–∑ 3-5 —à–∞–≥–æ–≤
2. –ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–ª–∞–Ω
3. –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –≤—Å–µ –ª–∏ —à–∞–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã

**–ó–∞–¥–∞–Ω–∏–µ 6: –ú—É–ª—å—Ç–∏–∑–∞–¥–∞—á–Ω—ã–π –∞–≥–µ–Ω—Ç**

–°–æ–∑–¥–∞–π—Ç–µ –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç:
1. –†–∞–∑–±–∏—Ç—å —Å–ª–æ–∂–Ω—É—é –∑–∞–¥–∞—á—É –Ω–∞ –ø–æ–¥–∑–∞–¥–∞—á–∏
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∂–¥—É—é –ø–æ–¥–∑–∞–¥–∞—á—É –æ—Ç–¥–µ–ª—å–Ω–æ
3. –û–±—ä–µ–¥–∏–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã

1. **–ß—Ç–æ —Ç–∞–∫–æ–µ ReAct –∏ –∫–∞–∫ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è?**
   <details>
   <summary>–û—Ç–≤–µ—Ç</summary>
   ReAct = Reasoning + Acting. –ü–∞—Ç—Ç–µ—Ä–Ω, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∏–π —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏—è –≤ –µ–¥–∏–Ω—ã–π —Ü–∏–∫–ª: THOUGHT (—Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ) ‚Üí ACTION (–¥–µ–π—Å—Ç–≤–∏–µ) ‚Üí OBSERVATION (–Ω–∞–±–ª—é–¥–µ–Ω–∏–µ).
   </details>

2. **–ö–∞–∫–∏–µ —à–∞–≥–∏ –≤–∫–ª—é—á–∞–µ—Ç ReAct-—Ü–∏–∫–ª?**
   <details>
   <summary>–û—Ç–≤–µ—Ç</summary>
   1. THOUGHT: –†–∞—Å—Å—É–∂–¥–µ–Ω–∏–µ –æ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ
   2. ACTION: –í—ã–±–æ—Ä –∏ –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
   3. OBSERVATION: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–æ—Ç —Å–∏—Å—Ç–µ–º—ã)
   4. –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –¥–æ ANSWER (—Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç)
   </details>

3. **–ü–æ—á–µ–º—É OBSERVATION –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Å–∏—Å—Ç–µ–º–∞, –∞ –Ω–µ –∞–≥–µ–Ω—Ç?**
   <details>
   <summary>–û—Ç–≤–µ—Ç</summary>
   OBSERVATION ‚Äî —Ä–µ–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞. –ï—Å–ª–∏ –∞–≥–µ–Ω—Ç –±—É–¥–µ—Ç —Å–∞–º –ø–∏—Å–∞—Ç—å OBSERVATION, –æ–Ω –º–æ–∂–µ—Ç –≥–∞–ª–ª—é—Ü–∏–Ω–∏—Ä–æ–≤–∞—Ç—å. –°–∏—Å—Ç–µ–º–∞ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
   </details>

4. **–ö–∞–∫ –∞–≥–µ–Ω—Ç –ø–æ–Ω–∏–º–∞–µ—Ç, –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è?**
   <details>
   <summary>–û—Ç–≤–µ—Ç</summary>
   1. –ê–≥–µ–Ω—Ç –ø–∏—à–µ—Ç ANSWER –≤–º–µ—Å—Ç–æ ACTION ‚Äî —Å–∏–≥–Ω–∞–ª –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
   2. –î–æ—Å—Ç–∏–≥–Ω—É—Ç max_iterations ‚Äî –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞
   3. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ ‚Äî –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ
   </details>

5. **–ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –¥–∞—ë—Ç ReAct –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å –æ–±—ã—á–Ω—ã–º –∞–≥–µ–Ω—Ç–æ–º?**
   <details>
   <summary>–û—Ç–≤–µ—Ç</summary>
   1. –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å: –≤–∏–¥–Ω—ã —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞
   2. –û—Ç–ª–∞–¥–∫–∞: –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–π —à–∞–≥
   3. –¢–æ—á–Ω–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
   4. –ì–∏–±–∫–æ—Å—Ç—å: –∞–¥–∞–ø—Ç–∞—Ü–∏—è –∫ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
   </details>

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ —É—Ä–æ–∫–∞

### –ß—Ç–æ –º—ã –∏–∑—É—á–∏–ª–∏

- **–ü–∞—Ç—Ç–µ—Ä–Ω ReAct**: –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π
- **–¶–∏–∫–ª THOUGHT ‚Üí ACTION ‚Üí OBSERVATION**: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞
- **ReActAgent**: –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ Python
- **Research Agent**: —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π

### –ß—Ç–æ –¥–∞–ª—å—à–µ

–í —Å–ª–µ–¥—É—é—â–µ–º —É—Ä–æ–∫–µ **"–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –ø–∞–º—è—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ"** –º—ã:
- –î–æ–±–∞–≤–∏–º –∑–∞—â–∏—Ç—É –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è
- –†–µ–∞–ª–∏–∑—É–µ–º –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –ø–∞–º—è—Ç—å
- –°–æ–∑–¥–∞–¥–∏–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–∞
- –ü–æ–∑–Ω–∞–∫–æ–º–∏–º—Å—è —Å –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

**–ì–æ—Ç–æ–≤—ã –∫ production?** –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ [–£—Ä–æ–∫—É 4: –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å, –ø–∞–º—è—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ](lesson_4_production_agents.md)! üè≠

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –°—Ç–∞—Ç—å–∏:
- [ReAct: Synergizing Reasoning and Acting](https://arxiv.org/abs/2210.03629)
- [Chain-of-Thought Prompting](https://arxiv.org/abs/2201.11903)

### –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
- [LangChain ReAct Agent](https://python.langchain.com/docs/modules/agents/agent_types/react)
- [LlamaIndex ReAct Agent](https://docs.llamaindex.ai/en/stable/examples/agent/react_agent/)

